<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>aa: TV2.java Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">aa
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d7/d25/a00182_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TV2.java</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d7/d25/a00182.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="../../d6/d9c/a00352.html">    1</a></span>&#160;<span class="keyword">package </span>com.cliffc.aa.tvar;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d7/d08/a00378.html">Env</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d0/d48/a00351.html">node</a>.<a class="code" href="../../dc/d81/a01006.html">CallEpiNode</a>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">import</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d0/d48/a00351.html">node</a>.<a class="code" href="../../df/db5/a01158.html">Node</a>;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">import</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d0/d48/a00351.html">node</a>.<a class="code" href="../../da/d17/a01046.html">FreshNode</a>;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../db/ddc/a00353.html">type</a>.*;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d0/dc3/a00354.html">util</a>.*;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> org.jetbrains.annotations.<a class="code" href="../../d0/d1f/a01734.html">NotNull</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> java.util.*;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> <span class="keyword">static</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d3/d30/a00370.html">AA</a>.<a class="code" href="../../d3/d30/a00370.html#ad1b6f2b7e61738dac4e3aa0ebc7f36a7">unimpl</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Type Variable.  TVars unify (ala Tarjan Union-Find), and can have structure</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// (such as &quot;{ A -&gt; B }&quot;).  TVars are tied to a TNode to enforce Type structure</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// on Types.  TVars with no structure either refer to a plain Node, or get</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// unioned into another TVar.  TVars with structure have to match structure to</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// be unified, but then can be recursively unified.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// See HM.java for the prototype this is based from.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html">   23</a></span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="../../dc/d25/a01406.html">TV2</a> {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="comment">// Unique ID</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a53738f7608c4b779e2f08a15442044a9">   25</a></span>&#160;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/d25/a01406.html#a53738f7608c4b779e2f08a15442044a9">UID</a>=1;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">   26</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="comment">// - &quot;Args&quot;, &quot;Ret&quot;, &quot;Fun&quot;, &quot;Mem&quot;, &quot;Obj&quot;, &quot;If&quot;.  A structural tag for the H-M</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// &quot;type&quot;, these have to be equal during unification; their Keys in _args are</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="comment">// unioned and equal keys are unified</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">// - &quot;Base&quot; - some constant Type, Base Types MEET when unified.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">// - &quot;Nil&quot; - The XNIL/NIL Type.  Always loses all unifications.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="comment">// - &quot;Fresh&quot;: A one-off indirection to another TV2 which needs to be fresh-</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// unified instead of normal-unification of this TV2.  The freshable TV2 is</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// under the solo key &quot;Fresh&quot;.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// - &quot;Dead&quot;: a dead Node or a Type.ANY ConNode, and a dead TV2.  Unifies with</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// everything, wins all unifications, and has no structure.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// - &quot;Free&quot;: Nothing points to it, can be re-used.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">   38</a></span>&#160;  <span class="keyword">private</span> String <a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// Set of structural H-M parts.  Indexed by dense integer for fixed-size (ala</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// Args,Ret,Fun), indexed by sparse integer alias for TMem, indexed by String</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// for Obj field names.  Can be null if empty.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">   42</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;Comparable,TV2&gt;</a> <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// U-F algo.  Only set when unified, monotonic null-&gt;unification_target.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// Can change again to shorten unification changes.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">   46</a></span>&#160;  <span class="keyword">private</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">_unified</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// Base primitive types, not really tied to any Node.  TypeInt, TypeFlt.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">   49</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../d0/de2/a01442.html">Type</a> <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// Set of dependent CallEpiNodes, to be re-worklisted if the called function changes TV2.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">   52</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// Debug only.  Set of unioned Nodes.  null for empty.  Helpful to track where TV2s come from.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">   55</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>;     <span class="comment">//</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a0a888f54fd7abb1983c7ebc9e7898fa5">   56</a></span>&#160;  <span class="keyword">public</span> String <a class="code" href="../../dc/d25/a01406.html#a0a888f54fd7abb1983c7ebc9e7898fa5">_alloc_site</a>;    <span class="comment">// Creation site; used to track excessive creation.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// Track allocation statistics</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d8/d01/a01410.html#a370271a6f8d84bfbc2377347f0071619">   59</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">private</span> <span class="keyword">class </span><a class="code" href="../../d8/d01/a01410.html">ACnts</a> { <span class="keywordtype">int</span> <a class="code" href="../../d8/d01/a01410.html#a370271a6f8d84bfbc2377347f0071619">_malloc</a>, <a class="code" href="../../d8/d01/a01410.html#a86a5ea241cd2ee6df96072a3f55622b4">_free</a>; }</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#af7c326afc7784ef9ccb56cdb9a235bd0">   60</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;String,ACnts&gt; <a class="code" href="../../dc/d25/a01406.html#af7c326afc7784ef9ccb56cdb9a235bd0">ALLOCS</a> = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">// Counts at alloc sites</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// Common constructor</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">   63</a></span>&#160;  <span class="keyword">private</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(@NotNull String <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>, <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;Comparable,TV2&gt;</a> args, <a class="code" href="../../d0/de2/a01442.html">Type</a> type, <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> ns, @NotNull String alloc_site) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a> = <a class="code" href="../../dc/d25/a01406.html#a53738f7608c4b779e2f08a15442044a9">UID</a>++;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a> = <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a> = args;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a> = type;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = <span class="keyword">null</span>;               <span class="comment">// Lazy added</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a> = ns;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a0a888f54fd7abb1983c7ebc9e7898fa5">_alloc_site</a> = alloc_site;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../d8/d01/a01410.html">ACnts</a> ac = <a class="code" href="../../dc/d25/a01406.html#af7c326afc7784ef9ccb56cdb9a235bd0">ALLOCS</a>.computeIfAbsent(alloc_site,e -&gt; <span class="keyword">new</span> <a class="code" href="../../d8/d01/a01410.html">ACnts</a>());</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    ac.<a class="code" href="../../d8/d01/a01410.html#a370271a6f8d84bfbc2377347f0071619">_malloc</a>++;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// Accessors</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">   76</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() { <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">_unified</a>!=<span class="keyword">null</span>; }</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">   77</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(String s){ <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dd/d55/a01638.html">Util</a>.<a class="code" href="../../dd/d55/a01638.html#a3975ba7dca9fe2d6e4992b2b5558f882">eq</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>,s); }</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">   78</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>   () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Leaf&quot;</span>   ); }</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">   79</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>   () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Base&quot;</span>   ); }</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">   80</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a>    () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Nil&quot;</span>    ); }</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">   81</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>   () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Dead&quot;</span>   ); }</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a07ca3621fc62775d085fbb62dce31e25">   82</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a07ca3621fc62775d085fbb62dce31e25">is_free</a>   () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Free&quot;</span>   ); }</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">   83</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>    () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Err&quot;</span>    ); }</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a29d8787303bd1c47c3250141c67fcae6">   84</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a29d8787303bd1c47c3250141c67fcae6">is_tvar</a>   () { <span class="keywordflow">return</span> !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=<span class="keyword">null</span>; } <span class="comment">// Excludes unified,base,dead,nil,free</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a83d255f4df21f8b775f0a71b4fbb9e01">   85</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a>    <a class="code" href="../../dc/d25/a01406.html#a83d255f4df21f8b775f0a71b4fbb9e01">get_unified</a>() { assert <a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>(); <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">_unified</a>; }</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">   86</a></span>&#160;  <span class="keyword">public</span> String <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>() { <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>; }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Get at a key, with U-F rollup</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">   89</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <span class="keyword">get</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key ) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>==<span class="keyword">null</span> ) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv = <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.get(key);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span>( tv==<span class="keyword">null</span> ) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2 = tv.<a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span>( tv!=tv2 ) <a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(key,tv2);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> tv2;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// When inserting a new key, propagate deps</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">   99</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(<a class="code" href="../../d6/de1/a02518.html">Comparable</a> key, <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.put(key,tv);          <span class="comment">// Pick up a key-&gt;tv mapping</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a421ae75e116a6fb426743a25228966d5">merge_deps</a>(tv);             <span class="comment">// tv gets all deps that &#39;this&#39; has</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// Unify-at a selected key</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ac393d2954fea05a334ccd88b12234a17">  105</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#ac393d2954fea05a334ccd88b12234a17">unify_at</a>(<a class="code" href="../../d6/de1/a02518.html">Comparable</a> key, <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2, <span class="keywordtype">boolean</span> test ) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a8c549020b422e3d5c4dc123913024215">unify</a>(tv2,test);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a29d8787303bd1c47c3250141c67fcae6">is_tvar</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=<span class="keyword">null</span> &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> old = <span class="keyword">get</span>(key);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span>( old!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">return</span> old.<a class="code" href="../../dc/d25/a01406.html#a8c549020b422e3d5c4dc123913024215">unify</a>(tv2,test);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span>( test ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(key,tv2);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../d7/d08/a00378.html">Env</a>.<a class="code" href="../../d7/d08/a00378.html#ace73698a8b4c67bf851fc0068b036c87">GVN</a>.<a class="code" href="../../d9/d0a/a00390.html#a195b2b7d0b8f0f1770422573c2cc22ff">add_flow</a>(<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>);    <span class="comment">// Re-CallEpi</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Reset-at a selected key, when a non-HM-structure change happens</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a6e21d9846b4fa090d2a0c87b6d078981">  118</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a6e21d9846b4fa090d2a0c87b6d078981">reset_at</a>(Object o ) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() )</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.remove(o);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// Public factories</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Make a new TV2 attached to a Node.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a40fbdc3d7df0c7432ff5ac0561b5a13e">  126</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a40fbdc3d7df0c7432ff5ac0561b5a13e">make_leaf</a>(<a class="code" href="../../df/db5/a01158.html">Node</a> n, @NotNull String alloc_site) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> ns = n==<span class="keyword">null</span> ? null : <a class="code" href="../../d8/df1/a01414.html">UQNodes</a>.<a class="code" href="../../d8/df1/a01414.html#a56817ac6db518b86fd24f5db8f5f4206">make</a>(n);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a60bdc3571827136bffe84bddd53e8201">make_leaf_ns</a>(ns,alloc_site);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a60bdc3571827136bffe84bddd53e8201">  130</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a60bdc3571827136bffe84bddd53e8201">make_leaf_ns</a>(<a class="code" href="../../d8/df1/a01414.html">UQNodes</a> ns, @NotNull String alloc_site) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2 = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<span class="stringliteral">&quot;Leaf&quot;</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,ns,alloc_site);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    assert tv2.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> tv2;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// Make a new primitive base TV2</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a5c494cfeeb4144ff67e5856fc6fb389e">  136</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a5c494cfeeb4144ff67e5856fc6fb389e">make_base</a>(<a class="code" href="../../df/db5/a01158.html">Node</a> n, <a class="code" href="../../d0/de2/a01442.html">Type</a> type, @NotNull String alloc_site) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span>( type instanceof <a class="code" href="../../de/dc6/a01502.html">TypeObj</a> ) { <span class="comment">// Constant object?</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">make</a>(<span class="stringliteral">&quot;Obj&quot;</span>,n,alloc_site); <span class="comment">// Empty object constant</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> ns = n==<span class="keyword">null</span> ? null : <a class="code" href="../../d8/df1/a01414.html">UQNodes</a>.<a class="code" href="../../d8/df1/a01414.html#a56817ac6db518b86fd24f5db8f5f4206">make</a>(n);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    type = type.<a class="code" href="../../d0/de2/a01442.html#a15968efc921b38c6710053767a1e35dc">widen</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2 = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<span class="stringliteral">&quot;Base&quot;</span>,<span class="keyword">null</span>,type,ns,alloc_site);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    assert tv2.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">return</span> tv2;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Make a new primitive base TV2</span></div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a86bdc19a3f80db294f5e9f0d690c2f3c">  147</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a86bdc19a3f80db294f5e9f0d690c2f3c">make_err</a>(<a class="code" href="../../df/db5/a01158.html">Node</a> n, String msg, @NotNull String alloc_site) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> ns = n==<span class="keyword">null</span> ? null : <a class="code" href="../../d8/df1/a01414.html">UQNodes</a>.<a class="code" href="../../d8/df1/a01414.html#a56817ac6db518b86fd24f5db8f5f4206">make</a>(n);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2 = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<span class="stringliteral">&quot;Err&quot;</span>,<span class="keyword">null</span>,<a class="code" href="../../d0/d1a/a01518.html">TypeStr</a>.<a class="code" href="../../d0/d1a/a01518.html#ac318226162b9678acaf62563bdc04ed9">con</a>(msg.intern()),ns,alloc_site);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    assert tv2.<a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> tv2;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// Structural constructor, empty</span></div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">  154</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">make</a>(@NotNull String <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>, <a class="code" href="../../df/db5/a01158.html">Node</a> n, @NotNull String alloc_site ) { <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">make</a>(<a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>,n,alloc_site,<span class="keyword">new</span> <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;&gt;</a>()); }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// Structural constructor</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aa0e879691e40a900c87a92e0e316bc72">  156</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#aa0e879691e40a900c87a92e0e316bc72">make</a>(@NotNull String <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>, <a class="code" href="../../df/db5/a01158.html">Node</a> n, @NotNull String alloc_site, <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;Comparable,TV2&gt;</a> args) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    assert args!=<span class="keyword">null</span>;          <span class="comment">// Must have some structure</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2 = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>,args,<span class="keyword">null</span>,<a class="code" href="../../d8/df1/a01414.html">UQNodes</a>.<a class="code" href="../../d8/df1/a01414.html#a56817ac6db518b86fd24f5db8f5f4206">make</a>(n),alloc_site);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    assert !tv2.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> tv2;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// Structural constructor from array of TVs</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ae4f152b835882d5c7ab77bfdf73c311f">  163</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#ae4f152b835882d5c7ab77bfdf73c311f">make</a>(@NotNull String <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>, <a class="code" href="../../df/db5/a01158.html">Node</a> n, @NotNull String alloc_site, <a class="code" href="../../df/db5/a01158.html">Node</a>... ntvs) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    assert ntvs!=<span class="keyword">null</span>;          <span class="comment">// Must have some structure</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;Comparable,TV2&gt;</a> args = <span class="keyword">new</span> <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;&gt;</a>();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0; i&lt;ntvs.length; i++ )</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">if</span>( ntvs[i]!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        args.<a class="code" href="../../d1/d88/a01578.html#a173a0399a8be0ce533fa8293f931510a">put</a>(i,ntvs[i].tvar());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">make</a>(<a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>,n,alloc_site,args);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a989db00cbed5bceb7f403d4058e5b58d">  171</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a989db00cbed5bceb7f403d4058e5b58d">make</a>(@NotNull String <a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>, <a class="code" href="../../d8/df1/a01414.html">UQNodes</a> ns, @NotNull String alloc_site ) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv2 = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<a class="code" href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">name</a>, <span class="keyword">new</span> <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;&gt;</a>(),<span class="keyword">null</span>,ns,alloc_site);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    assert !tv2.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() &amp;&amp; !tv2.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> tv2;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// Structural constructor for new memory</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a95acdbc0296c7c4cdd77c333d71c3ec9">  178</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a95acdbc0296c7c4cdd77c333d71c3ec9">make_mem</a>(<a class="code" href="../../df/db5/a01158.html">Node</a> n, @NotNull String alloc_site) { <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">make</a>(<span class="stringliteral">&quot;Mem&quot;</span>,n,alloc_site,<span class="keyword">new</span> <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;&gt;</a>()); }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a7aab592945b0ce1a64d33bdce69d8122">  180</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a7aab592945b0ce1a64d33bdce69d8122">DEAD</a> = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<span class="stringliteral">&quot;Dead&quot;</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="stringliteral">&quot;static&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a31bddb4a040fd7ea42947588d662a8dd">  181</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a31bddb4a040fd7ea42947588d662a8dd">NIL</a>  = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<span class="stringliteral">&quot;Nil&quot;</span> ,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="stringliteral">&quot;static&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a6f8b11eef3b8646135f21166610eba9f">  183</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a6f8b11eef3b8646135f21166610eba9f">reset_to_init0</a>() {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a31bddb4a040fd7ea42947588d662a8dd">NIL</a>.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = <a class="code" href="../../dc/d25/a01406.html#a7aab592945b0ce1a64d33bdce69d8122">DEAD</a>.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a31bddb4a040fd7ea42947588d662a8dd">NIL</a>.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>   = <a class="code" href="../../dc/d25/a01406.html#a7aab592945b0ce1a64d33bdce69d8122">DEAD</a>.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>   = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a13785bda2aee6b413ec23553659f5cca">  187</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a13785bda2aee6b413ec23553659f5cca">reset</a>(<a class="code" href="../../df/db5/a01158.html">Node</a> n) { <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>!=<span class="keyword">null</span> ) <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>.<a class="code" href="../../d3/d2d/a01606.html#a27b3239dcc81fdb7acf7c220d8fb20c1">remove</a>(n.<a class="code" href="../../df/db5/a01158.html#a7da00d39e3923250352c680956a33858">_uid</a>); }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a22579fa236159c7d33cb513bc10a012e">  189</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a22579fa236159c7d33cb513bc10a012e">free</a>() {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() ) <a class="code" href="../../dc/d25/a01406.html#af7c326afc7784ef9ccb56cdb9a235bd0">ALLOCS</a>.get(<a class="code" href="../../dc/d25/a01406.html#a0a888f54fd7abb1983c7ebc9e7898fa5">_alloc_site</a>)._free++;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a> = <span class="stringliteral">&quot;Free&quot;</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a> = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a> = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>   = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// Cyclic (structural) equals</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aca9186fb3bc4c2ba9584ea1e800b7192">  200</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#aca9186fb3bc4c2ba9584ea1e800b7192">eq</a>( <a class="code" href="../../dc/d25/a01406.html">TV2</a> that ) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span>( that==<span class="keyword">null</span> ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.isEmpty() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.isEmpty();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#aca9186fb3bc4c2ba9584ea1e800b7192">eq</a> = <a class="code" href="../../dc/d25/a01406.html#a240ea8341b0cb66bb2072a6197ff8bd2">_eq</a>(that);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.clear();  <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.clear();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#aca9186fb3bc4c2ba9584ea1e800b7192">eq</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a240ea8341b0cb66bb2072a6197ff8bd2">  207</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a240ea8341b0cb66bb2072a6197ff8bd2">_eq</a>( <a class="code" href="../../dc/d25/a01406.html">TV2</a> that) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==that ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; !that.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dd/d55/a01638.html">Util</a>.<a class="code" href="../../dd/d55/a01638.html#a3975ba7dca9fe2d6e4992b2b5558f882">eq</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>,that.<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>) ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>==that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>; <span class="comment">// Base types are equal if base _types are equal</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) {                         <span class="comment">// Leafs are equal if they always map the same</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> eq2 = <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.computeIfAbsent(<span class="keyword">this</span>,k -&gt; that);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> that==eq2;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.size() != that.<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.size() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// Cyclic check</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">long</span> luid = ((long)<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>&lt;&lt;32)|that.<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>; <span class="comment">// Make a unique id for the pair</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.get(luid)!=null ) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Cyclic, wrapped.  Something else determines eq/ne</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.put(luid,<span class="keyword">this</span>);                    <span class="comment">// Mark for cycle</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Structural recursion</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() )</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span>( !<span class="keyword">get</span>(key)._eq(that.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(key)) )</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// True if args are equal</span></div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a383e14e38f068c319aff8e734c111757">  231</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a383e14e38f068c319aff8e734c111757">eq</a>(<a class="code" href="../../df/db5/a01158.html">Node</a>[] args) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0; i&lt;args.length; i++ )</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">if</span>( args[i]!=<span class="keyword">null</span> &amp;&amp; args[i].tvar()!=<span class="keyword">get</span>(i) )</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Classic Tarjan U-F with rollup</span></div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">  240</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>() {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() ) <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> top = <a class="code" href="../../dc/d25/a01406.html#a83d255f4df21f8b775f0a71b4fbb9e01">get_unified</a>();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span>( !top.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() ) <span class="keywordflow">return</span> top;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// Find U-F top</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> cnt=0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">while</span>( top.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; cnt++&lt;100 ) top = top.<a class="code" href="../../dc/d25/a01406.html#a83d255f4df21f8b775f0a71b4fbb9e01">get_unified</a>();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    assert cnt&lt;100;             <span class="comment">// Infinite roll-up loop</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> v = <span class="keyword">this</span>;               <span class="comment">// Rerun, rolling up to top</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">while</span>( v != top ) v = v.<a class="code" href="../../dc/d25/a01406.html#a2e250028349773e18a0ae5eae010e11b">_union</a>(top);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> top;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// U-F union; &#39;this&#39; becomes &#39;that&#39;.  If &#39;this&#39; was used in an CallEpi/Apply,</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// re-check the CallEpi.  Always returns true.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">  255</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <span class="keyword">union</span>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==that ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; !<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// Worklist: put updates on the worklist for revisiting</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="../../d7/d08/a00378.html">Env</a>.<a class="code" href="../../d7/d08/a00378.html#ace73698a8b4c67bf851fc0068b036c87">GVN</a>.<a class="code" href="../../d9/d0a/a00390.html#a195b2b7d0b8f0f1770422573c2cc22ff">add_flow</a>(<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>); <span class="comment">// Re-CallEpi</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// TODO: REMOVE THIS BACKDOORS HACK</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>!=<span class="keyword">null</span> &amp;&amp; that._ns!=<span class="keyword">null</span> &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>.<a class="code" href="../../d3/d2d/a01606.html#ac862bee73e146376b7a2b6a724f65d1f">size</a>()==1 ) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="../../df/db5/a01158.html">Node</a> val=<span class="keyword">null</span>; <span class="keywordflow">for</span>( <a class="code" href="../../df/db5/a01158.html">Node</a> xval : <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>.<a class="code" href="../../d3/d2d/a01606.html#a7dabc238f566bd1039cc62b63af734ed">values</a>() ) { val=xval; <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">if</span>( val instanceof <a class="code" href="../../da/d17/a01046.html">FreshNode</a> &amp;&amp; that._ns.containsKey(((<a class="code" href="../../da/d17/a01046.html">FreshNode</a>)val).in(1)._uid) )</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="../../d7/d08/a00378.html">Env</a>.<a class="code" href="../../d7/d08/a00378.html#ace73698a8b4c67bf851fc0068b036c87">GVN</a>.<a class="code" href="../../d9/d0a/a00390.html#ad52b88a21b47c661e6f6a3bcfdbb3576">add_reduce</a>(val);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a2e250028349773e18a0ae5eae010e11b">_union</a>(that);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#af7c326afc7784ef9ccb56cdb9a235bd0">ALLOCS</a>.get(<a class="code" href="../../dc/d25/a01406.html#a0a888f54fd7abb1983c7ebc9e7898fa5">_alloc_site</a>)._free++;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a2e250028349773e18a0ae5eae010e11b">  270</a></span>&#160;  <span class="keyword">private</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a2e250028349773e18a0ae5eae010e11b">_union</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> old = <a class="code" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">_unified</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">_unified</a>=that;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a421ae75e116a6fb426743a25228966d5">merge_deps</a>(that);           <span class="comment">// Merge update lists, for future unions</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a9ba175cfa593fd3d5b1857442e6565a3">merge_ns</a>  (that);           <span class="comment">// Merge Node list, for easier debugging</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>   = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> old;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// Used in the recursive unification process.  During unify detects cycles,</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// to allow cyclic unification.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">  284</a></span>&#160;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;TV2&gt;</a> <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a> = <span class="keyword">new</span> <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;&gt;</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// Structural unification.  Both &#39;this&#39; and that&#39; are the same afterwards.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// Returns True if progress.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a8c549020b422e3d5c4dc123913024215">  288</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a8c549020b422e3d5c4dc123913024215">unify</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, <span class="keywordtype">boolean</span> test) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">//assert !this.is_unified() &amp;&amp; !that.is_unified();</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">//if( this==that ) return false;</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">//assert DUPS.isEmpty();</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">//boolean progress = _unify(that,test);</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">//DUPS.clear();</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">//return progress;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">throw</span> unimpl();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Classic structural unification, no &quot;fresh&quot;.  Unifies &#39;this&#39; into &#39;that&#39;.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// Both &#39;this&#39; and &#39;that&#39; are the same afterwards.  Returns true if progress.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">  300</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">_unify</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, <span class="keywordtype">boolean</span> test) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; !that.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==that ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// Check for simple, non-recursive, unification.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// NIL always loses and makes no progress (no structure implications)</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a> () ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a> () ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// All remaining paths make progress and return true.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span>( test ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Dead wins all</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> this.<span class="keyword">union</span>(that);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// two errs union in either order, so keep lower uid (actually should merge error strings)</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() &amp;&amp; that.<a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>&lt;that.<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a> ) <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span>(      <a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() ) <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() ) <span class="keywordflow">return</span>      <span class="keyword">union</span>(that);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// Two leafs union in either order, so keep lower uid</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() &amp;&amp; that.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a> &lt; that.<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a> ) <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) <span class="keywordflow">return</span> this.<span class="keyword">union</span>(that);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// Bases unify constants also</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() &amp;&amp; that.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad8363e8ed623aaeb12f95026b968b1b1">unify_base</a>(that);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Cycle check.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordtype">long</span> luid = ((long)<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>&lt;&lt;32)|that.<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>; <span class="comment">// Make a unique id for the pair</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> rez = <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.get(luid);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span>( rez!=<span class="keyword">null</span> ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Been there, done that</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.put(luid,that);          <span class="comment">// Close cycles</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// Errors</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dd/d55/a01638.html">Util</a>.<a class="code" href="../../dd/d55/a01638.html#a3975ba7dca9fe2d6e4992b2b5558f882">eq</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>,that.<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>) )</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a15b5f5bc1d711531dbb56ebfe10bfe94">union_err</a>(that,<span class="stringliteral">&quot;Cannot unify &quot;</span>+<span class="keyword">this</span>+<span class="stringliteral">&quot; and &quot;</span>+that);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=that.<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>; <span class="comment">// Efficiency hack elsewhere if this is true here</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// Structural recursion unification, this into that.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() ) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> vthis =       <span class="keyword">get</span>(key);  assert vthis!=<span class="keyword">null</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> vthat =  that.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(key);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span>( vthat==<span class="keyword">null</span> ) that.<a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(key,vthis);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">else</span>              { vthis.<a class="code" href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">_unify</a>(vthat,test); that = that.<a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>(); }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      assert !that.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// TODO: Check for being equal, cyclic-ly, and return a prior if possible.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>().<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(that);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a15b5f5bc1d711531dbb56ebfe10bfe94">  348</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a15b5f5bc1d711531dbb56ebfe10bfe94">union_err</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, String msg) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">union</span>(that);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<a class="code" href="../../dc/d25/a01406.html#a86bdc19a3f80db294f5e9f0d690c2f3c">make_err</a>(<span class="keyword">null</span>,msg,<span class="stringliteral">&quot;TV2.unify_err&quot;</span>));</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ad8363e8ed623aaeb12f95026b968b1b1">  353</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#ad8363e8ed623aaeb12f95026b968b1b1">unify_base</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a> = <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>.<a class="code" href="../../d0/de2/a01442.html#a086b90d9d651ac00b80a9b5caa60eb09">meet</a>(that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">union</span>(that);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#afa5f006a73eb9e0fd45b9ba6a6fed014">  357</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#afa5f006a73eb9e0fd45b9ba6a6fed014">fresh_base</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, <span class="keywordtype">boolean</span> test) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="../../d0/de2/a01442.html">Type</a> con = <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>.<a class="code" href="../../d0/de2/a01442.html#a086b90d9d651ac00b80a9b5caa60eb09">meet</a>(that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span>( con==that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a> ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// No progress</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span>( !test ) that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a> = con;  <span class="comment">// Yes progress, but no update if testing</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Used in the recursive unification process.  During fresh_unify tracks the</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// mapping from LHS TV2s to RHS TVs.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">  366</a></span>&#160;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HashMap&lt;TV2,TV2&gt; <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a> = <span class="keyword">new</span> HashMap&lt;&gt;();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// Make a (lazy) fresh copy of &#39;this&#39; and unify it with &#39;that&#39;.  This is</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// the same as calling &#39;fresh&#39; then &#39;unify&#39;, without the clone of &#39;this&#39;.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// The TV2[] is used when making the &#39;fresh&#39; copy for the occurs_check.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// Returns progress.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// If test, we are testing only and make no changes.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a48dec7908873404fa6e2e1d5b19b336f">  374</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a48dec7908873404fa6e2e1d5b19b336f">fresh_unify</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, <a class="code" href="../../dc/d25/a01406.html">TV2</a>[] vs, <span class="keywordtype">boolean</span> test) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">//assert VARS.isEmpty() &amp;&amp; DUPS.isEmpty();</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">//boolean progress = _fresh_unify(that,vs,test);</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">//VARS.clear();  DUPS.clear();</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">//return progress;</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">throw</span> unimpl();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// Apply &#39;this&#39; structure on &#39;that&#39;; no modifications to &#39;this&#39;.  VARS maps</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// from the cloned LHS to the RHS replacement.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ab60dd4e4b9caf765c077fc24c96521d8">  384</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#ab60dd4e4b9caf765c077fc24c96521d8">_fresh_unify</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, <a class="code" href="../../dc/d25/a01406.html">TV2</a>[] vs, <span class="keywordtype">boolean</span> test) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; !that.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// Several trivial cases that do not really do any work</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==that ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<span class="keyword">this</span>); <span class="comment">// Kill &#39;that&#39;, same as LHS</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a>() || that.<a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a>() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// Check for closing cycles</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> prior = <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.get(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span>( prior!=<span class="keyword">null</span> )           <span class="comment">// Been there, done that?  Return prior mapping</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">return</span> prior.<a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>().<a class="code" href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">_unify</a>(that, test);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a58af3c233303f8cedbcf08aec1632f6d">cycle_equals</a>(that) ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<span class="keyword">false</span>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<span class="keyword">false</span>); <span class="comment">// That is an error, ignore &#39;this&#39; and no progress</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<a class="code" href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">_unify</a>(that,test));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Famous &#39;occurs-check&#39;, switch to normal unify</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ac1371821daaa0266f0edea5481c9867f">occurs_in</a>( vs ) ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<a class="code" href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">_unify</a>(that,test));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// Either side is a Leaf, unify to the other (perhaps with a fresh copy)</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span>( this.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<span class="keyword">false</span>); <span class="comment">// Lazy map LHS tvar to RHS</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span>( that.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() )          <span class="comment">// RHS is a leaf tvar; union with a copy of LHS</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">return</span> test || <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,that.<a class="code" href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">union</a>(<a class="code" href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">repl</a>(vs)));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Bases MEET cons in RHS</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() &amp;&amp; that.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<a class="code" href="../../dc/d25/a01406.html#afa5f006a73eb9e0fd45b9ba6a6fed014">fresh_base</a>(that,test));</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Should be structurally equal now</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dd/d55/a01638.html">Util</a>.<a class="code" href="../../dd/d55/a01638.html#a3975ba7dca9fe2d6e4992b2b5558f882">eq</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>,that.<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>) )</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">throw</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d3/d30/a00370.html">AA</a>.<a class="code" href="../../d3/d30/a00370.html#ad1b6f2b7e61738dac4e3aa0ebc7f36a7">unimpl</a>(); <span class="comment">// unification error</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// Structural recursion unification, lazy on LHS</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordtype">boolean</span> progress = <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(that,<span class="keyword">false</span>); <span class="comment">// Early set, to stop cycles</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() ) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> lhs =      <span class="keyword">get</span>(key);  assert lhs!=<span class="keyword">null</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> rhs = that.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(key);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">if</span>( rhs==<span class="keyword">null</span> ) {         <span class="comment">// No RHS to unify against</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span>( !test ) {           <span class="comment">// RHS is a fresh copy of the LHS</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;          that.<a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(key,lhs.<a class="code" href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">repl</a>(vs));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          <a class="code" href="../../d7/d08/a00378.html">Env</a>.<a class="code" href="../../d7/d08/a00378.html#ace73698a8b4c67bf851fc0068b036c87">GVN</a>.<a class="code" href="../../d9/d0a/a00390.html#a195b2b7d0b8f0f1770422573c2cc22ff">add_flow</a>(that.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>); <span class="comment">// Re-CallEpi</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        progress |= lhs.<a class="code" href="../../dc/d25/a01406.html#ab60dd4e4b9caf765c077fc24c96521d8">_fresh_unify</a>(rhs,vs,test);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">if</span>( progress &amp;&amp; test ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> progress;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">  434</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that, <span class="keywordtype">boolean</span> progress) { <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.put(<span class="keyword">this</span>,that); <span class="keywordflow">return</span> progress; }</div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a09746364239208c74a1e60856884cda8">  435</a></span>&#160;  <span class="keyword">private</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a09746364239208c74a1e60856884cda8">vput</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that) { <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.put(<span class="keyword">this</span>,that); <span class="keywordflow">return</span> that; }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// Replicate LHS, including structure and cycles, replacing leafs as they appear</span></div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">  438</a></span>&#160;  <span class="keyword">private</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">repl</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a>[] vs) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();        <span class="comment">// Already chased these down</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> <span class="keyword">this</span>; <span class="comment">// Dead always unifies and wins</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> t = <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.get(<span class="keyword">this</span>);      <span class="comment">// Prior answer?</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span>( t!=<span class="keyword">null</span> ) <span class="keywordflow">return</span> t;      <span class="comment">// Been there, done that, return prior answer</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) <span class="comment">// If occurs_in lexical scope, keep same variable, else make a new leaf</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>( <a class="code" href="../../dc/d25/a01406.html#ac1371821daaa0266f0edea5481c9867f">occurs_in</a>(vs) ? <span class="keyword">this</span> : <a class="code" href="../../dc/d25/a01406.html#a60bdc3571827136bffe84bddd53e8201">make_leaf_ns</a>(<span class="keyword">null</span>,<span class="stringliteral">&quot;TV2_repl_leaf&quot;</span>) );</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Must replicate Base&#39;s, like a Mem or Obj.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(<a class="code" href="../../dc/d25/a01406.html#a5c494cfeeb4144ff67e5856fc6fb389e">make_base</a>(<span class="keyword">null</span>,<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>,<span class="stringliteral">&quot;TV2_repl_base&quot;</span>));</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// A few no-arg variants (Nil, Fresh)</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>==<span class="keyword">null</span> ) <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">vput</a>(<span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="stringliteral">&quot;TV2_repl_shallow&quot;</span>));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// Structural recursion replicate</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> rez = <span class="keyword">new</span> <a class="code" href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">TV2</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>, <span class="keyword">new</span> <a class="code" href="../../d1/d88/a01578.html">NonBlockingHashMap&lt;&gt;</a>(),<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="stringliteral">&quot;TV2_repl_deep&quot;</span>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.put(<span class="keyword">this</span>,rez); <span class="comment">// Insert in dups BEFORE structural recursion, to stop cycles</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() )</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      rez.<a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(key,<span class="keyword">get</span>(key).<a class="code" href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">repl</a>(vs));</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// Do a repl, then rename all _ns lists.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ad71e1e39bc70e439ac1354dfc93c479a">  461</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#ad71e1e39bc70e439ac1354dfc93c479a">repl_rename</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a>[]vs, HashMap&lt;Node,Node&gt; map) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.isEmpty() &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.isEmpty();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv = <a class="code" href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">repl</a>(vs);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a83e37d97539e7bf8965dfca391cc3f2e">_rename</a>(tv,map);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">VARS</a>.clear();  <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.clear();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span> tv;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a83e37d97539e7bf8965dfca391cc3f2e">  468</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a83e37d97539e7bf8965dfca391cc3f2e">_rename</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> tv, HashMap&lt;Node,Node&gt; map) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.get(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>) != <span class="keyword">null</span> ) <span class="keywordflow">return</span>; <span class="comment">// Been there, remapped this</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.put(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>,<span class="keyword">this</span>);                 <span class="comment">// Only remap once</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==tv ) <span class="keywordflow">return</span>;               <span class="comment">// Using the same TVar</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    assert tv.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>==<span class="keyword">null</span> &amp;&amp; tv.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>==<span class="keyword">null</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    tv.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>= <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>==<span class="keyword">null</span> ? null : <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>.<a class="code" href="../../d8/df1/a01414.html#a292d2c37002719c94db13e29a951e5b2">rename</a>(map);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    tv.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>  = <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>  ==<span class="keyword">null</span> ? null : <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>  .<a class="code" href="../../d8/df1/a01414.html#a292d2c37002719c94db13e29a951e5b2">rename</a>(map);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a> != <span class="keyword">null</span> )</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() )</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.get(key)._rename(tv.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(key),map);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// Used by Loads and Stores.  Unify tv against all aliases at this field</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// only.  Aliases are either produced by the Parser (so very generic) or from</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">// forwards-flow from News and very specific.  Ignore the generic ones until</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// they refine.  TODO: As aliases further refine, need to undo-redo prior</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// unifies against larger/weaker aliases.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a173f4ba3df1f29fc0dcb41589edc93dc">  488</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a173f4ba3df1f29fc0dcb41589edc93dc">unify_alias_fld</a>(<a class="code" href="../../df/db5/a01158.html">Node</a> ldst, <a class="code" href="../../d8/dd0/a01430.html">BitsAlias</a> aliases, String fld, <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv, <span class="keywordtype">boolean</span> test, String alloc_site) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Mem&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    assert !tv.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">boolean</span> progress=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> alias : aliases ) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// TODO: Probably wrong, as no reason to believe that as soon as alias</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">// sharpens above AARY that it has hit its best sane value.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">if</span>( alias &lt;= <a class="code" href="../../d8/dd0/a01430.html">BitsAlias</a>.<a class="code" href="../../d8/dd0/a01430.html#ab6668ea940ca50d6d3c4fd2f35581ab6">AARY</a> ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// No unify on parser-specific values</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> tobj = <span class="keyword">get</span>(alias);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">if</span>( tobj == <span class="keyword">null</span> ) {      <span class="comment">// Missing, act as a fresh TV2 and lazily manifest</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">if</span>( test ) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Definitely will be progress</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        progress = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="../../dc/d25/a01406.html">TV2</a> tvo = <a class="code" href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">make</a>(<span class="stringliteral">&quot;Obj&quot;</span>,ldst,alloc_site);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(alias,tvo);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        tvo.<a class="code" href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">args_put</a>(fld,tv);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tobj.<a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Obj&quot;</span>) ) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        progress = tobj.<a class="code" href="../../dc/d25/a01406.html#ac393d2954fea05a334ccd88b12234a17">unify_at</a>(fld,tv.<a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>(),test);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( tobj.<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() || tobj.<a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Err&quot;</span>) ) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        tobj.<a class="code" href="../../dc/d25/a01406.html#a8c549020b422e3d5c4dc123913024215">unify</a>(tv.<a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>(),test);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d3/d30/a00370.html">AA</a>.<a class="code" href="../../d3/d30/a00370.html#ad1b6f2b7e61738dac4e3aa0ebc7f36a7">unimpl</a>();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">if</span>( progress &amp;&amp; test ) <span class="keywordflow">return</span> progress; <span class="comment">// Shortcut</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> progress;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// Unify the two memories only at the given aliases</span></div>
<div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a85fb34ef9ea353e0a47c567a8202cecd">  515</a></span>&#160;  <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a85fb34ef9ea353e0a47c567a8202cecd">unify_alias</a>(<a class="code" href="../../d8/dd0/a01430.html">BitsAlias</a> aliases, <a class="code" href="../../dc/d25/a01406.html">TV2</a> mem, <span class="keywordtype">boolean</span> test) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==mem ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Already unified, no progress</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    assert (<a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Mem&quot;</span>) || <a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>()) &amp;&amp; mem.<a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Mem&quot;</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">boolean</span> progress = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tobj=<span class="keyword">null</span>;              <span class="comment">// For asserts</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> alias : aliases ) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv = mem.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(alias);  <span class="comment">// Get prior mem idea of this alias</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">if</span>( tv==<span class="keyword">null</span> ) <span class="keywordflow">continue</span>;  <span class="comment">// No idea (yet) from prior mem, nothing to unify</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span>( tobj==<span class="keyword">null</span> ) tobj=tv; <span class="comment">// All objects in this set of aliases are already unified</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">else</span> assert tobj==tv;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      progress |= <a class="code" href="../../dc/d25/a01406.html#ac393d2954fea05a334ccd88b12234a17">unify_at</a>(alias,tv,test); <span class="comment">// Overwrite the default for alias</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">if</span>( progress &amp;&amp; test ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span> progress;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// Find instances of &#39;tv&#39; inside of &#39;this&#39; via structural recursion.  Walk</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// the matching Type at the same time.  Report the first one found, and</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// assert all the others have the same Type.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aa5af74082cd338b0be0f43a0e3b05df8">  535</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../d0/de2/a01442.html">Type</a> <a class="code" href="../../dc/d25/a01406.html#aa5af74082cd338b0be0f43a0e3b05df8">find_tvar</a>(<a class="code" href="../../d0/de2/a01442.html">Type</a> t, <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.isEmpty();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="../../d0/de2/a01442.html">Type</a> rez = <a class="code" href="../../dc/d25/a01406.html#a12bcc39ffe0e0c703cdbd3336f2de237">_find_tvar</a>(t,tv,<a class="code" href="../../d0/de2/a01442.html">Type</a>.<a class="code" href="../../d0/de2/a01442.html#a45b1b62ef9143b7742bb770de1034fb9">ALL</a>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">DUPS</a>.clear();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  }</div>
<div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a12bcc39ffe0e0c703cdbd3336f2de237">  541</a></span>&#160;  <span class="keyword">private</span> <a class="code" href="../../d0/de2/a01442.html">Type</a> <a class="code" href="../../dc/d25/a01406.html#a12bcc39ffe0e0c703cdbd3336f2de237">_find_tvar</a>(<a class="code" href="../../d0/de2/a01442.html">Type</a> t, <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv, <a class="code" href="../../d0/de2/a01442.html">Type</a> rez) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span>( tv.<a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span>( t==<a class="code" href="../../d0/de2/a01442.html">Type</a>.<a class="code" href="../../d0/de2/a01442.html#a45b1b62ef9143b7742bb770de1034fb9">ALL</a> ) <span class="keywordflow">return</span> rez; <span class="comment">// Join against &#39;ALL&#39; never changes anything</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span>( tv==<span class="keyword">this</span> ) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      rez = rez.<a class="code" href="../../d0/de2/a01442.html#a8ca47b43ab89089bd312510730041561">join</a>(t);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Mem&quot;</span>:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">if</span>( t ==<a class="code" href="../../d0/de2/a01442.html">Type</a>.<a class="code" href="../../d0/de2/a01442.html#a66f9cd0071f284f8f4badb5eca904720">ANY</a> ) <span class="keywordflow">return</span> rez; <span class="comment">// No substructure in type</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../d6/d51/a01494.html">TypeMem</a> tmem = (<a class="code" href="../../d6/d51/a01494.html">TypeMem</a>)t;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() ) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="../../de/dc6/a01502.html">TypeObj</a> to = tmem.<a class="code" href="../../d6/d51/a01494.html#ae46f6ec465a8f92933cac6594c35d615">at</a>((Integer) key);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="../../dc/d25/a01406.html">TV2</a> obj = <span class="keyword">get</span>(key);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span>( obj!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;          rez = obj.<a class="code" href="../../dc/d25/a01406.html#a12bcc39ffe0e0c703cdbd3336f2de237">_find_tvar</a>(to,tv,rez);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Obj&quot;</span>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">if</span>( t==<a class="code" href="../../de/dc6/a01502.html">TypeObj</a>.<a class="code" href="../../de/dc6/a01502.html#a68552cf221d599855cfc2906fd5b2e1a">UNUSED</a> || t==<a class="code" href="../../de/dc6/a01502.html">TypeObj</a>.<a class="code" href="../../de/dc6/a01502.html#a2f0f37629678b504449f6fdf70f39339">ISUSED</a> )</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">return</span> rez; <span class="comment">// No substructure in type</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">if</span>( t instanceof <a class="code" href="../../d0/d1a/a01518.html">TypeStr</a> || t instanceof <a class="code" href="../../da/df6/a01454.html">TypeAry</a> )</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">return</span> rez; <span class="comment">// TODO: Handle These</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="../../da/da6/a01522.html">TypeStruct</a> ts = (<a class="code" href="../../da/da6/a01522.html">TypeStruct</a>)t; <span class="comment">//</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() ) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">//int idx = ts.find((String)key);</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">//if( idx!= -1 )          // If field exists</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment">//  rez = get(key)._find_tvar(ts.at(idx),tv,rez);</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">throw</span> unimpl();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Fun&quot;</span>:</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span>( t.<a class="code" href="../../d0/de2/a01442.html#a963687439af26e21baf8a6901f52674a">is_forward_ref</a>() ) <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">if</span>( !(t instanceof <a class="code" href="../../d8/d7b/a01478.html">TypeFunPtr</a>) ) <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">// TypeFunPtrs carry only a set of FIDXS &amp; a DISPLAY.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">// Hence no other Type is available here for lifting.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Ret&quot;</span>:</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="../../d7/d90/a01530.html">TypeTuple</a> tt = (<a class="code" href="../../d7/d90/a01530.html">TypeTuple</a>)t;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0; i&lt;tt.<a class="code" href="../../d7/d90/a01530.html#a47d2201401538218682099fe1a41cbcd">len</a>(); i++ )</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        rez = <span class="keyword">get</span>(i)._find_tvar(tt.<a class="code" href="../../d7/d90/a01530.html#ae4b5261d8e37ce7b725ff9832d524ae0">at</a>(i),tv,rez);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Ptr&quot;</span>:</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">if</span>( !(t instanceof <a class="code" href="../../d6/dc9/a01498.html">TypeMemPtr</a>) ) <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">get</span>(0).<a class="code" href="../../dc/d25/a01406.html#a12bcc39ffe0e0c703cdbd3336f2de237">_find_tvar</a>(((<a class="code" href="../../d6/dc9/a01498.html">TypeMemPtr</a>)t)._obj,tv,rez);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Base&quot;</span>:</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Dead&quot;</span>:</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Err&quot;</span>:</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Leaf&quot;</span>:</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&quot;Nil&quot;</span>:</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordflow">return</span> rez; <span class="comment">// No substructure in TV2 and not equal already</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> <a class="code" href="../../df/d03/a00348.html">com</a>.<a class="code" href="../../d7/dfc/a00349.html">cliffc</a>.<a class="code" href="../../d1/dc6/a00347.html">aa</a>.<a class="code" href="../../d3/d30/a00370.html">AA</a>.<a class="code" href="../../d3/d30/a00370.html#ad1b6f2b7e61738dac4e3aa0ebc7f36a7">unimpl</a>();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a380a3f85214b1b0ad116351f911e96d1">  598</a></span>&#160;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="../../df/dee/a01646.html">VBitSet</a> <a class="code" href="../../dc/d25/a01406.html#a380a3f85214b1b0ad116351f911e96d1">ODUPS</a> = <span class="keyword">new</span> <a class="code" href="../../df/dee/a01646.html">VBitSet</a>();</div>
<div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#ac1371821daaa0266f0edea5481c9867f">  599</a></span>&#160;  <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#ac1371821daaa0266f0edea5481c9867f">occurs_in</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a>[] vs) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span>( vs==<span class="keyword">null</span> ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a380a3f85214b1b0ad116351f911e96d1">ODUPS</a>.isEmpty();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">boolean</span> found = <a class="code" href="../../dc/d25/a01406.html#a7c257871a546d20f2fe8c0868c33bf54">_occurs_in</a>(vs);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a380a3f85214b1b0ad116351f911e96d1">ODUPS</a>.clear();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> found;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Does &#39;this&#39; type occur in any scope, mid-definition (as a forward-ref).</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// If not, then return false (and typically make a fresh copy).</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// If it does, then &#39;this&#39; reference is a recursive self-reference</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// and needs to keep the self-type instead of making fresh.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a7c257871a546d20f2fe8c0868c33bf54">  611</a></span>&#160;  <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a7c257871a546d20f2fe8c0868c33bf54">_occurs_in</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a>[] vs) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Can NOT modify &#39;vs&#39; for U-F, because blows FreshNode hash.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../dc/d25/a01406.html">TV2</a> v : vs )</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a820442ae543367b8dfed96b533307cdb">_occurs_in_type</a>(v.find()) )</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a820442ae543367b8dfed96b533307cdb">  619</a></span>&#160;  <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a820442ae543367b8dfed96b533307cdb">_occurs_in_type</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> x) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; !x.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span>( x==<span class="keyword">this</span> ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a380a3f85214b1b0ad116351f911e96d1">ODUPS</a>.<a class="code" href="../../df/dee/a01646.html#a88ad20daf92e92fe0e3925b23c4fecf0">tset</a>(x.<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>) ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Been there, done that</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span>( !x.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() &amp;&amp; x.<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : x.<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() )</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a820442ae543367b8dfed96b533307cdb">_occurs_in_type</a>(x.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(key)) )</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// Get TV2 from array, with U-F rollup</span></div>
<div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a1d5b186ce5ea2331a0e01dcd79224e21">  631</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <span class="keyword">get</span>(<a class="code" href="../../dc/d25/a01406.html">TV2</a>[] vs, <span class="keywordtype">int</span> i) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv = vs[i].<a class="code" href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">find</a>();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> vs[i]==tv ? tv : (vs[i]=tv); <span class="comment">// U-F rollup</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">// Test for structural equivalence, including cycles</span></div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">  639</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;TV2,TV2&gt; <a class="code" href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">CDUPS</a> = <span class="keyword">new</span> HashMap&lt;&gt;();</div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a58af3c233303f8cedbcf08aec1632f6d">  640</a></span>&#160;  <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a58af3c233303f8cedbcf08aec1632f6d">cycle_equals</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">CDUPS</a>.isEmpty();</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordtype">boolean</span> rez = <a class="code" href="../../dc/d25/a01406.html#aa6953253a90458b4cb39e9491f50c02f">_cycle_equals</a>(that);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">CDUPS</a>.clear();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> rez;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div>
<div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aa6953253a90458b4cb39e9491f50c02f">  646</a></span>&#160;  <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#aa6953253a90458b4cb39e9491f50c02f">_cycle_equals</a>(<a class="code" href="../../dc/d25/a01406.html">TV2</a> that) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() &amp;&amp; !that.<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span>( <span class="keyword">this</span>==that ) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() &amp;&amp; that.<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() )</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>==that.<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>; <span class="comment">// Base-cases have to be completely identical</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../dd/d55/a01638.html">Util</a>.<a class="code" href="../../dd/d55/a01638.html#a3975ba7dca9fe2d6e4992b2b5558f882">eq</a>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>,that.<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>) ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Wrong type-var names</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() || that.<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;       <span class="comment">// Unequal leaves are unequal</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>==that.<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a> &amp;&amp; !<a class="code" href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">is_leaf</a>() ) <span class="keywordflow">return</span> <span class="keyword">true</span>;    <span class="comment">// Both null is OK</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.size() != that.<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.size() ) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Mismatched sizes</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// Cycles stall the equal/unequal decision until we see a difference.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="../../dc/d25/a01406.html">TV2</a> tc = <a class="code" href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">CDUPS</a>.get(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span>( tc!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span> tc==that; <span class="comment">// Cycle check; true if both cycling the same</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">CDUPS</a>.put(<span class="keyword">this</span>,that);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() ) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> lhs =      <span class="keyword">get</span>(key);  assert lhs!=<span class="keyword">null</span>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="../../dc/d25/a01406.html">TV2</a> rhs = that.<a class="code" href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">get</a>(key);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span>( rhs==<span class="keyword">null</span> || !lhs.<a class="code" href="../../dc/d25/a01406.html#aa6953253a90458b4cb39e9491f50c02f">_cycle_equals</a>(rhs) ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">// This is a TV2 function that is the target of &#39;fresh&#39;, i.e., this function</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// might be fresh-unified with some other function.  Push the application</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// down the function parts; if any changes the fresh-application may make</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// progress.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a43081f81125f85ae21fe9b9baf492ba0">  673</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="../../df/dee/a01646.html">VBitSet</a> <a class="code" href="../../dc/d25/a01406.html#a43081f81125f85ae21fe9b9baf492ba0">DEPS_VISIT</a>  = <span class="keyword">new</span> <a class="code" href="../../df/dee/a01646.html">VBitSet</a>();</div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a973aebcbaef22013ce812986509a7cd3">  674</a></span>&#160;  <span class="keyword">public</span> <a class="code" href="../../dc/d25/a01406.html">TV2</a> <a class="code" href="../../dc/d25/a01406.html#a973aebcbaef22013ce812986509a7cd3">push_dep</a>(<a class="code" href="../../dc/d81/a01006.html">CallEpiNode</a> dep) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    assert <a class="code" href="../../dc/d25/a01406.html#a43081f81125f85ae21fe9b9baf492ba0">DEPS_VISIT</a>.isEmpty();</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a3c332f2ea005200c9b35129df3e591a2">_push_update</a>(dep);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#a43081f81125f85ae21fe9b9baf492ba0">DEPS_VISIT</a>.clear();</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div>
<div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a3c332f2ea005200c9b35129df3e591a2">  680</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a3c332f2ea005200c9b35129df3e591a2">_push_update</a>(<a class="code" href="../../dc/d81/a01006.html">CallEpiNode</a> dep) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    assert !<a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a43081f81125f85ae21fe9b9baf492ba0">DEPS_VISIT</a>.<a class="code" href="../../df/dee/a01646.html#a88ad20daf92e92fe0e3925b23c4fecf0">tset</a>(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>) ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>!=<span class="keyword">null</span> &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>.<a class="code" href="../../d3/d2d/a01606.html#ac30117742c9a7c0573e631930ecc22d1">get</a>(dep.<a class="code" href="../../df/db5/a01158.html#a7da00d39e3923250352c680956a33858">_uid</a>)!=<span class="keyword">null</span> ) <span class="keywordflow">return</span>; <span class="comment">// Already here and in all children</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Dead&quot;</span>) ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>==<span class="keyword">null</span> ? <a class="code" href="../../d8/df1/a01414.html">UQNodes</a>.<a class="code" href="../../d8/df1/a01414.html#a56817ac6db518b86fd24f5db8f5f4206">make</a>(dep) : <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>.<a class="code" href="../../d8/df1/a01414.html#a4ef173761f50fd5b2886d3636b4d6c6e">add</a>(dep);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet() ) <span class="comment">// Structural recursion on a complex TV2</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keyword">get</span>(key).<a class="code" href="../../dc/d25/a01406.html#a3c332f2ea005200c9b35129df3e591a2">_push_update</a>(dep);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// Merge Dependent CallEpiNode lists, &#39;this&#39; into &#39;that&#39;.  Required to</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// trigger CEPI.unify_lift when types change structurally.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a421ae75e116a6fb426743a25228966d5">  693</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a421ae75e116a6fb426743a25228966d5">merge_deps</a>( <a class="code" href="../../dc/d25/a01406.html">TV2</a> that ) { <span class="keywordflow">if</span>( !that.<a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Dead&quot;</span>) ) that.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> = that.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>==<span class="keyword">null</span> ? <a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a> : that.<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>.<a class="code" href="../../d8/df1/a01414.html#a307da1f173cb93565f32125d90d7f2cb">addAll</a>(<a class="code" href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">_deps</a>); }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">// Merge Node lists, &#39;this&#39; into &#39;that&#39;, for easier debugging.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">// Lazily remove dead nodes on the fly.</span></div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a9ba175cfa593fd3d5b1857442e6565a3">  696</a></span>&#160;  <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d25/a01406.html#a9ba175cfa593fd3d5b1857442e6565a3">merge_ns</a>  ( <a class="code" href="../../dc/d25/a01406.html">TV2</a> that ) { <span class="keywordflow">if</span>( !that.<a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Dead&quot;</span>) ) that.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>   = that.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>  ==<span class="keyword">null</span> ? <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>   : that.<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>  .<a class="code" href="../../d8/df1/a01414.html#a307da1f173cb93565f32125d90d7f2cb">addAll</a>(<a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>  ); }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment">// --------------------------------------------</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// Pretty print</span></div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a09757419fe496417dc275c05ee6f5077">  701</a></span>&#160;  @Override <span class="keyword">public</span> <span class="keyword">final</span> String <a class="code" href="../../dc/d25/a01406.html#a09757419fe496417dc275c05ee6f5077">toString</a>() {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;String&gt;</a> dups = <span class="keyword">new</span> <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;&gt;</a>();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="../../df/dee/a01646.html">VBitSet</a> bs = <span class="keyword">new</span> <a class="code" href="../../df/dee/a01646.html">VBitSet</a>();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#aab01004b5728ce0109daff3f4fb48b4b">find_dups</a>(bs,dups,0);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(<span class="keyword">new</span> <a class="code" href="../../d4/d99/a01634.html">SB</a>(),bs.<a class="code" href="../../df/dee/a01646.html#a832a026adcca9a4e1ad14a2621bf0185">clr</a>(),dups,<span class="keyword">true</span>,0,0).toString();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  }</div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">  707</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">final</span> String <a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(<span class="keywordtype">int</span> d) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;String&gt;</a> dups = <span class="keyword">new</span> <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;&gt;</a>();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="../../df/dee/a01646.html">VBitSet</a> bs = <span class="keyword">new</span> <a class="code" href="../../df/dee/a01646.html">VBitSet</a>();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="../../dc/d25/a01406.html#aab01004b5728ce0109daff3f4fb48b4b">find_dups</a>(bs,dups,0);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(<span class="keyword">new</span> <a class="code" href="../../d4/d99/a01634.html">SB</a>(),bs.<a class="code" href="../../df/dee/a01646.html#a832a026adcca9a4e1ad14a2621bf0185">clr</a>(),dups,<span class="keyword">true</span>,0,d).toString();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#a5dde549e0fc6c1a2f46976e5d79873ee">  714</a></span>&#160;  <span class="keywordtype">boolean</span> <a class="code" href="../../dc/d25/a01406.html#a5dde549e0fc6c1a2f46976e5d79873ee">is_prim</a>() {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">isa</a>(<span class="stringliteral">&quot;Obj&quot;</span>) &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=<span class="keyword">null</span> &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.containsKey(<span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// These TV2 types get large, with complex sharing patterns.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Need to find the sharing to pretty-print the shared parts.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aab01004b5728ce0109daff3f4fb48b4b">  720</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/d25/a01406.html#aab01004b5728ce0109daff3f4fb48b4b">find_dups</a>(<a class="code" href="../../df/dee/a01646.html">VBitSet</a> bs, <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong&lt;String&gt;</a> dups, <span class="keywordtype">int</span> scnt) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span>( bs.<a class="code" href="../../df/dee/a01646.html#a88ad20daf92e92fe0e3925b23c4fecf0">tset</a>(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>) ) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() || <a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a>() ) <span class="keywordflow">return</span> scnt;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">if</span>( dups.<a class="code" href="../../d3/d2d/a01606.html#a81efe0f95acedf68bddb8ebd7b45b26f">containsKey</a>(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>) ) <span class="keywordflow">return</span> scnt; <span class="comment">// Already has a dup name</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      dups.<a class="code" href="../../d3/d2d/a01606.html#a5a55b6990f90cebab60051b6a03c5e3b">put</a>(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>,<span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keywordtype">char</span>[]{(char)(<span class="charliteral">&#39;A&#39;</span>+scnt)}));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span> scnt+1;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() )</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a83d255f4df21f8b775f0a71b4fbb9e01">get_unified</a>().<a class="code" href="../../dc/d25/a01406.html#aab01004b5728ce0109daff3f4fb48b4b">find_dups</a>(bs,dups,scnt);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>!=<span class="keyword">null</span> )</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../dc/d25/a01406.html">TV2</a> tv : <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.values() )</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="../../dc/d25/a01406.html#a5dde549e0fc6c1a2f46976e5d79873ee">is_prim</a>() )</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          scnt = tv.find_dups(bs,dups,scnt);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">return</span> scnt;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// Pretty print</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  @SuppressWarnings(<span class="stringliteral">&quot;unchecked&quot;</span>)</div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="../../dc/d25/a01406.html#aefacfe68d3a38285907c27ad863932db">  738</a></span>&#160;  public final <a class="code" href="../../d4/d99/a01634.html">SB</a> <a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(<a class="code" href="../../d4/d99/a01634.html">SB</a> sb, <a class="code" href="../../df/dee/a01646.html">VBitSet</a> bs, <a class="code" href="../../d3/d2d/a01606.html">NonBlockingHashMapLong</a>&lt;String&gt; dups, <span class="keywordtype">boolean</span> debug, <span class="keywordtype">int</span> d, <span class="keywordtype">int</span> max) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">is_dead</a>() ) <span class="keywordflow">return</span> sb.p(<span class="stringliteral">&quot;Dead&quot;</span>); <span class="comment">// Do not print NS</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">is_nil</a>()  ) <span class="keywordflow">return</span> sb.p(<span class="stringliteral">&quot;Nil&quot;</span> ); <span class="comment">// Do not print NS</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">is_err</a>()  ) <span class="keywordflow">return</span> sb.p(<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>.<a class="code" href="../../d0/de2/a01442.html#ade2059a7facf88e4f1e3c338d2b8fc5d">getstr</a>());</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    String stv = dups.get(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span>( stv!=<span class="keyword">null</span> ) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      sb.p(<span class="charliteral">&#39;$&#39;</span>).p(stv);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">if</span>( bs.tset(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>) ) <span class="keywordflow">return</span> sb;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      sb.p(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// Explicit U-F chain</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">is_unified</a>() ) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">if</span>( debug ) sb.p(<span class="stringliteral">&quot;V&quot;</span>).p(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>).p(<span class="stringliteral">&quot;&gt;&gt;&quot;</span>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">_unified</a>.<a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(sb,bs,dups,debug,d,max);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    (<a class="code" href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">is_base</a>() ? sb.p(<a class="code" href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">_type</a>) : sb.p(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>)).p(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// Print all unioned nodes</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>!=<span class="keyword">null</span> &amp;&amp; <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>.<a class="code" href="../../d3/d2d/a01606.html#ac862bee73e146376b7a2b6a724f65d1f">size</a>() != 0 ) { <span class="comment">// Have any</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">for</span>( <a class="code" href="../../df/db5/a01158.html">Node</a> tn : <a class="code" href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">_ns</a>.<a class="code" href="../../d3/d2d/a01606.html#a7dabc238f566bd1039cc62b63af734ed">values</a>() )      <span class="comment">// For all unioned</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">if</span>( !tn.is_dead() ) { <span class="comment">// Dead lazily cleared out, do not bother to print</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;          sb.p(<span class="charliteral">&#39;N&#39;</span>).p(tn._uid).p(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;          <span class="keywordflow">if</span>( !debug ) <span class="keywordflow">break</span>; <span class="comment">// Debug, see them all; non-debug just the first</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    } <span class="keywordflow">else</span>                      <span class="comment">// No unioned nodes</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      sb.p(<span class="stringliteral">&quot;V&quot;</span>).p(<a class="code" href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">_uid</a>);        <span class="comment">// So just the _uid</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a5dde549e0fc6c1a2f46976e5d79873ee">is_prim</a>() ) <span class="keywordflow">return</span> sb.p(<span class="stringliteral">&quot;:PRIMS&quot;</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">// Structural contents</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a> != <span class="keyword">null</span> ) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keyword">final</span> <span class="keywordtype">int</span> min = Math.min(d+1,max);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">switch</span>(<a class="code" href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">_name</a>) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">case</span> <span class="stringliteral">&quot;Fun&quot;</span>:</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        sb.p(<span class="stringliteral">&quot;:{ &quot;</span>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span>( d &lt; max ) sb.nl().i(min);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <a class="code" href="../../dc/d25/a01406.html">TV2</a> args = <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.get(<span class="stringliteral">&quot;Args&quot;</span>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="keywordflow">if</span>( args==<span class="keyword">null</span> ) sb.p(<span class="stringliteral">&quot;Args&quot;</span>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">else</span> args.<a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(sb,bs,dups,debug,d+1,max);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span>( d &lt; max ) sb.nl().i(min);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        sb.p(<span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">if</span>( d &lt; max ) sb.nl().i(min);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <a class="code" href="../../dc/d25/a01406.html">TV2</a> ret = <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.get(<span class="stringliteral">&quot;Ret&quot;</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">if</span>( ret ==<span class="keyword">null</span> ) sb.p(<span class="stringliteral">&quot;Ret&quot;</span> );</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">else</span> ret .<a class="code" href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">str</a>(sb,bs,dups,debug,d+1,max);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span>( d &lt; max ) sb.nl().i(d);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        sb.p(<span class="stringliteral">&quot; }&quot;</span>);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        sb.p(<span class="stringliteral">&quot;:[ &quot;</span>);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <a class="code" href="../../d6/d02/a01542.html">Ary&lt;Comparable&gt;</a> keys = <span class="keyword">new</span> <a class="code" href="../../d6/d02/a01542.html">Ary&lt;&gt;</a>(<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.keySet().toArray(<span class="keyword">new</span> <a class="code" href="../../d6/de1/a02518.html">Comparable</a>[<a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.size()]));</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;          keys.<a class="code" href="../../d6/d02/a01542.html#a65898ac2a48fc5bdf4b3de6d962ff008">sort_update</a>((x,y)-&gt; {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">if</span>( x==y ) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">if</span>( x==<span class="stringliteral">&quot;^&quot;</span> ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span>( y==<span class="stringliteral">&quot;^&quot;</span> ) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">return</span> x.compareTo(y);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          });</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="../../d6/de1/a02518.html">Comparable</a> key : keys ) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="keywordflow">if</span>( d &lt; max ) sb.nl().i(min);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          sb.p(key.toString()).p(<span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;          <a class="code" href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">_args</a>.get(key).str(sb,bs,dups,debug,d+1,max);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          sb.p(<span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">if</span>( d &lt; max ) sb.nl().i(d);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        sb.p(<span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">return</span> sb;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aa01406_html_a77e3c32f9eb51629d00f34080f7ba0c9"><div class="ttname"><a href="../../dc/d25/a01406.html#a77e3c32f9eb51629d00f34080f7ba0c9">com.cliffc.aa.tvar.TV2._args</a></div><div class="ttdeci">NonBlockingHashMap&lt; Comparable, TV2 &gt; _args</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00042">TV2.java:42</a></div></div>
<div class="ttc" id="aa01406_html_a3de376591ecb21dcf80dfe01df9c7dae"><div class="ttname"><a href="../../dc/d25/a01406.html#a3de376591ecb21dcf80dfe01df9c7dae">com.cliffc.aa.tvar.TV2.name</a></div><div class="ttdeci">String name()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00086">TV2.java:86</a></div></div>
<div class="ttc" id="aa01406_html_a83d255f4df21f8b775f0a71b4fbb9e01"><div class="ttname"><a href="../../dc/d25/a01406.html#a83d255f4df21f8b775f0a71b4fbb9e01">com.cliffc.aa.tvar.TV2.get_unified</a></div><div class="ttdeci">TV2 get_unified()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00085">TV2.java:85</a></div></div>
<div class="ttc" id="aa01406_html_a1f3c3136338fb7f55cd183c9f849bde3"><div class="ttname"><a href="../../dc/d25/a01406.html#a1f3c3136338fb7f55cd183c9f849bde3">com.cliffc.aa.tvar.TV2.is_err</a></div><div class="ttdeci">boolean is_err()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00083">TV2.java:83</a></div></div>
<div class="ttc" id="aa01406_html_ac393d2954fea05a334ccd88b12234a17"><div class="ttname"><a href="../../dc/d25/a01406.html#ac393d2954fea05a334ccd88b12234a17">com.cliffc.aa.tvar.TV2.unify_at</a></div><div class="ttdeci">boolean unify_at(Comparable key, TV2 tv2, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00105">TV2.java:105</a></div></div>
<div class="ttc" id="aa01406_html_a43081f81125f85ae21fe9b9baf492ba0"><div class="ttname"><a href="../../dc/d25/a01406.html#a43081f81125f85ae21fe9b9baf492ba0">com.cliffc.aa.tvar.TV2.DEPS_VISIT</a></div><div class="ttdeci">static final VBitSet DEPS_VISIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00673">TV2.java:673</a></div></div>
<div class="ttc" id="aa01406_html_a8c549020b422e3d5c4dc123913024215"><div class="ttname"><a href="../../dc/d25/a01406.html#a8c549020b422e3d5c4dc123913024215">com.cliffc.aa.tvar.TV2.unify</a></div><div class="ttdeci">boolean unify(TV2 that, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00288">TV2.java:288</a></div></div>
<div class="ttc" id="aa01478_html"><div class="ttname"><a href="../../d8/d7b/a01478.html">com.cliffc.aa.type.TypeFunPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd5/a00215_source.html#l00023">TypeFunPtr.java:23</a></div></div>
<div class="ttc" id="aa01406_html_a859299a2535947e37a086d16e328eb53"><div class="ttname"><a href="../../dc/d25/a01406.html#a859299a2535947e37a086d16e328eb53">com.cliffc.aa.tvar.TV2._unify</a></div><div class="ttdeci">boolean _unify(TV2 that, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00300">TV2.java:300</a></div></div>
<div class="ttc" id="aa01406_html_a5c494cfeeb4144ff67e5856fc6fb389e"><div class="ttname"><a href="../../dc/d25/a01406.html#a5c494cfeeb4144ff67e5856fc6fb389e">com.cliffc.aa.tvar.TV2.make_base</a></div><div class="ttdeci">static TV2 make_base(Node n, Type type, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00136">TV2.java:136</a></div></div>
<div class="ttc" id="aa01406_html_aa6953253a90458b4cb39e9491f50c02f"><div class="ttname"><a href="../../dc/d25/a01406.html#aa6953253a90458b4cb39e9491f50c02f">com.cliffc.aa.tvar.TV2._cycle_equals</a></div><div class="ttdeci">boolean _cycle_equals(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00646">TV2.java:646</a></div></div>
<div class="ttc" id="aa01578_html"><div class="ttname"><a href="../../d1/d88/a01578.html">com.cliffc.aa.util.NonBlockingHashMap</a></div><div class="ttdoc">A lock-free alternate implementation of java.util.concurrent.ConcurrentHashMap with better scaling pr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/a00275_source.html#l00073">NonBlockingHashMap.java:75</a></div></div>
<div class="ttc" id="aa01406_html_af7c326afc7784ef9ccb56cdb9a235bd0"><div class="ttname"><a href="../../dc/d25/a01406.html#af7c326afc7784ef9ccb56cdb9a235bd0">com.cliffc.aa.tvar.TV2.ALLOCS</a></div><div class="ttdeci">static final HashMap&lt; String, ACnts &gt; ALLOCS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00060">TV2.java:60</a></div></div>
<div class="ttc" id="aa01494_html"><div class="ttname"><a href="../../d6/d51/a01494.html">com.cliffc.aa.type.TypeMem</a></div><div class="ttdoc">Memory type; the state of all of memory; memory edges order memory ops.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/a00227_source.html#l00053">TypeMem.java:53</a></div></div>
<div class="ttc" id="aa01638_html_a3975ba7dca9fe2d6e4992b2b5558f882"><div class="ttname"><a href="../../dd/d55/a01638.html#a3975ba7dca9fe2d6e4992b2b5558f882">com.cliffc.aa.util.Util.eq</a></div><div class="ttdeci">static boolean eq(String s0, String s1)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc3/a00284_source.html#l00016">Util.java:16</a></div></div>
<div class="ttc" id="aa01442_html_a8ca47b43ab89089bd312510730041561"><div class="ttname"><a href="../../d0/de2/a01442.html#a8ca47b43ab89089bd312510730041561">com.cliffc.aa.type.Type.join</a></div><div class="ttdeci">Type join(Type t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00619">Type.java:619</a></div></div>
<div class="ttc" id="aa00349_html"><div class="ttname"><a href="../../d7/dfc/a00349.html">com.cliffc</a></div></div>
<div class="ttc" id="aa01430_html_ab6668ea940ca50d6d3c4fd2f35581ab6"><div class="ttname"><a href="../../d8/dd0/a01430.html#ab6668ea940ca50d6d3c4fd2f35581ab6">com.cliffc.aa.type.BitsAlias.AARY</a></div><div class="ttdeci">static final int AARY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/a00191_source.html#l00025">BitsAlias.java:25</a></div></div>
<div class="ttc" id="aa01442_html_a15968efc921b38c6710053767a1e35dc"><div class="ttname"><a href="../../d0/de2/a01442.html#a15968efc921b38c6710053767a1e35dc">com.cliffc.aa.type.Type.widen</a></div><div class="ttdeci">Type widen()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00828">Type.java:828</a></div></div>
<div class="ttc" id="aa01406_html_a2e250028349773e18a0ae5eae010e11b"><div class="ttname"><a href="../../dc/d25/a01406.html#a2e250028349773e18a0ae5eae010e11b">com.cliffc.aa.tvar.TV2._union</a></div><div class="ttdeci">TV2 _union(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00270">TV2.java:270</a></div></div>
<div class="ttc" id="aa01406_html_a29d8787303bd1c47c3250141c67fcae6"><div class="ttname"><a href="../../dc/d25/a01406.html#a29d8787303bd1c47c3250141c67fcae6">com.cliffc.aa.tvar.TV2.is_tvar</a></div><div class="ttdeci">boolean is_tvar()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00084">TV2.java:84</a></div></div>
<div class="ttc" id="aa01158_html"><div class="ttname"><a href="../../df/db5/a01158.html">com.cliffc.aa.node.Node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d88/a00128_source.html#l00016">Node.java:16</a></div></div>
<div class="ttc" id="aa01406_html_a380a3f85214b1b0ad116351f911e96d1"><div class="ttname"><a href="../../dc/d25/a01406.html#a380a3f85214b1b0ad116351f911e96d1">com.cliffc.aa.tvar.TV2.ODUPS</a></div><div class="ttdeci">static final VBitSet ODUPS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00598">TV2.java:598</a></div></div>
<div class="ttc" id="aa00354_html"><div class="ttname"><a href="../../d0/dc3/a00354.html">com.cliffc.aa.util</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d03/a00254_source.html#l00001">AbstractEntry.java:1</a></div></div>
<div class="ttc" id="aa01406_html_a1ea6815318a8e9ecb4200a5532d6b7bb"><div class="ttname"><a href="../../dc/d25/a01406.html#a1ea6815318a8e9ecb4200a5532d6b7bb">com.cliffc.aa.tvar.TV2._name</a></div><div class="ttdeci">String _name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00038">TV2.java:38</a></div></div>
<div class="ttc" id="aa01406_html_a377695e89e0f4d49d74ecfdde4e432a7"><div class="ttname"><a href="../../dc/d25/a01406.html#a377695e89e0f4d49d74ecfdde4e432a7">com.cliffc.aa.tvar.TV2.args_put</a></div><div class="ttdeci">void args_put(Comparable key, TV2 tv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00099">TV2.java:99</a></div></div>
<div class="ttc" id="aa01442_html"><div class="ttname"><a href="../../d0/de2/a01442.html">com.cliffc.aa.type.Type</a></div><div class="ttdoc">an implementation of language AA</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00094">Type.java:94</a></div></div>
<div class="ttc" id="aa01410_html_a86a5ea241cd2ee6df96072a3f55622b4"><div class="ttname"><a href="../../d8/d01/a01410.html#a86a5ea241cd2ee6df96072a3f55622b4">com.cliffc.aa.tvar.TV2.ACnts._free</a></div><div class="ttdeci">int _free</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00059">TV2.java:59</a></div></div>
<div class="ttc" id="aa01542_html"><div class="ttname"><a href="../../d6/d02/a01542.html">com.cliffc.aa.util.Ary</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/a00257_source.html#l00011">Ary.java:11</a></div></div>
<div class="ttc" id="aa01406_html_a0a888f54fd7abb1983c7ebc9e7898fa5"><div class="ttname"><a href="../../dc/d25/a01406.html#a0a888f54fd7abb1983c7ebc9e7898fa5">com.cliffc.aa.tvar.TV2._alloc_site</a></div><div class="ttdeci">String _alloc_site</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00056">TV2.java:56</a></div></div>
<div class="ttc" id="aa01430_html"><div class="ttname"><a href="../../d8/dd0/a01430.html">com.cliffc.aa.type.BitsAlias</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/a00191_source.html#l00008">BitsAlias.java:8</a></div></div>
<div class="ttc" id="aa01530_html"><div class="ttname"><a href="../../d7/d90/a01530.html">com.cliffc.aa.type.TypeTuple</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd7/a00248_source.html#l00011">TypeTuple.java:11</a></div></div>
<div class="ttc" id="aa01406_html_ac7a29d1efd0c0a826798380697e87df8"><div class="ttname"><a href="../../dc/d25/a01406.html#ac7a29d1efd0c0a826798380697e87df8">com.cliffc.aa.tvar.TV2._deps</a></div><div class="ttdeci">UQNodes _deps</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00052">TV2.java:52</a></div></div>
<div class="ttc" id="aa01410_html_a370271a6f8d84bfbc2377347f0071619"><div class="ttname"><a href="../../d8/d01/a01410.html#a370271a6f8d84bfbc2377347f0071619">com.cliffc.aa.tvar.TV2.ACnts._malloc</a></div><div class="ttdeci">int _malloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00059">TV2.java:59</a></div></div>
<div class="ttc" id="aa01406_html_ad071677ca9033b9849b3c299d2c6127a"><div class="ttname"><a href="../../dc/d25/a01406.html#ad071677ca9033b9849b3c299d2c6127a">com.cliffc.aa.tvar.TV2.vput</a></div><div class="ttdeci">boolean vput(TV2 that, boolean progress)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00434">TV2.java:434</a></div></div>
<div class="ttc" id="aa01406_html_a13785bda2aee6b413ec23553659f5cca"><div class="ttname"><a href="../../dc/d25/a01406.html#a13785bda2aee6b413ec23553659f5cca">com.cliffc.aa.tvar.TV2.reset</a></div><div class="ttdeci">void reset(Node n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00187">TV2.java:187</a></div></div>
<div class="ttc" id="aa01414_html_a307da1f173cb93565f32125d90d7f2cb"><div class="ttname"><a href="../../d8/df1/a01414.html#a307da1f173cb93565f32125d90d7f2cb">com.cliffc.aa.tvar.UQNodes.addAll</a></div><div class="ttdeci">UQNodes addAll(UQNodes uq)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df3/a00185_source.html#l00047">UQNodes.java:47</a></div></div>
<div class="ttc" id="aa01406_html_ad22bed3185077b767ca1d8ab82aed583"><div class="ttname"><a href="../../dc/d25/a01406.html#ad22bed3185077b767ca1d8ab82aed583">com.cliffc.aa.tvar.TV2._ns</a></div><div class="ttdeci">UQNodes _ns</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00055">TV2.java:55</a></div></div>
<div class="ttc" id="aa01406_html_a15b5f5bc1d711531dbb56ebfe10bfe94"><div class="ttname"><a href="../../dc/d25/a01406.html#a15b5f5bc1d711531dbb56ebfe10bfe94">com.cliffc.aa.tvar.TV2.union_err</a></div><div class="ttdeci">boolean union_err(TV2 that, String msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00348">TV2.java:348</a></div></div>
<div class="ttc" id="aa01646_html_a832a026adcca9a4e1ad14a2621bf0185"><div class="ttname"><a href="../../df/dee/a01646.html#a832a026adcca9a4e1ad14a2621bf0185">com.cliffc.aa.util.VBitSet.clr</a></div><div class="ttdeci">VBitSet clr()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d25/a00290_source.html#l00009">VBitSet.java:9</a></div></div>
<div class="ttc" id="aa01442_html_a66f9cd0071f284f8f4badb5eca904720"><div class="ttname"><a href="../../d0/de2/a01442.html#a66f9cd0071f284f8f4badb5eca904720">com.cliffc.aa.type.Type.ANY</a></div><div class="ttdeci">static final Type ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00325">Type.java:325</a></div></div>
<div class="ttc" id="aa01606_html_ac862bee73e146376b7a2b6a724f65d1f"><div class="ttname"><a href="../../d3/d2d/a01606.html#ac862bee73e146376b7a2b6a724f65d1f">com.cliffc.aa.util.NonBlockingHashMapLong.size</a></div><div class="ttdeci">int size()</div><div class="ttdoc">Returns the number of key-value mappings in this map.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l00255">NonBlockingHashMapLong.java:255</a></div></div>
<div class="ttc" id="aa01406_html_a93399f41a0866cdccf898a3eced60f53"><div class="ttname"><a href="../../dc/d25/a01406.html#a93399f41a0866cdccf898a3eced60f53">com.cliffc.aa.tvar.TV2.DUPS</a></div><div class="ttdeci">static final NonBlockingHashMapLong&lt; TV2 &gt; DUPS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00284">TV2.java:284</a></div></div>
<div class="ttc" id="aa01406_html_a240ea8341b0cb66bb2072a6197ff8bd2"><div class="ttname"><a href="../../dc/d25/a01406.html#a240ea8341b0cb66bb2072a6197ff8bd2">com.cliffc.aa.tvar.TV2._eq</a></div><div class="ttdeci">boolean _eq(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00207">TV2.java:207</a></div></div>
<div class="ttc" id="aa01454_html"><div class="ttname"><a href="../../da/df6/a01454.html">com.cliffc.aa.type.TypeAry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d79/a00203_source.html#l00007">TypeAry.java:7</a></div></div>
<div class="ttc" id="aa01442_html_a086b90d9d651ac00b80a9b5caa60eb09"><div class="ttname"><a href="../../d0/de2/a01442.html#a086b90d9d651ac00b80a9b5caa60eb09">com.cliffc.aa.type.Type.meet</a></div><div class="ttdeci">final Type meet(Type t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00412">Type.java:412</a></div></div>
<div class="ttc" id="aa01522_html"><div class="ttname"><a href="../../da/da6/a01522.html">com.cliffc.aa.type.TypeStruct</a></div><div class="ttdoc">A memory-based collection of optionally named fields.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d22/a00245_source.html#l00050">TypeStruct.java:50</a></div></div>
<div class="ttc" id="aa00370_html_ad1b6f2b7e61738dac4e3aa0ebc7f36a7"><div class="ttname"><a href="../../d3/d30/a00370.html#ad1b6f2b7e61738dac4e3aa0ebc7f36a7">com.cliffc.aa.AA.unimpl</a></div><div class="ttdeci">static RuntimeException unimpl()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d46/a00002_source.html#l00010">AA.java:10</a></div></div>
<div class="ttc" id="aa01410_html"><div class="ttname"><a href="../../d8/d01/a01410.html">com.cliffc.aa.tvar.TV2.ACnts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00059">TV2.java:59</a></div></div>
<div class="ttc" id="aa01406_html_a60bdc3571827136bffe84bddd53e8201"><div class="ttname"><a href="../../dc/d25/a01406.html#a60bdc3571827136bffe84bddd53e8201">com.cliffc.aa.tvar.TV2.make_leaf_ns</a></div><div class="ttdeci">static TV2 make_leaf_ns(UQNodes ns, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00130">TV2.java:130</a></div></div>
<div class="ttc" id="aa01406_html_a973aebcbaef22013ce812986509a7cd3"><div class="ttname"><a href="../../dc/d25/a01406.html#a973aebcbaef22013ce812986509a7cd3">com.cliffc.aa.tvar.TV2.push_dep</a></div><div class="ttdeci">TV2 push_dep(CallEpiNode dep)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00674">TV2.java:674</a></div></div>
<div class="ttc" id="aa01406_html_a4648c36530ad943bcfe943b14dc33c36"><div class="ttname"><a href="../../dc/d25/a01406.html#a4648c36530ad943bcfe943b14dc33c36">com.cliffc.aa.tvar.TV2.is_unified</a></div><div class="ttdeci">boolean is_unified()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00076">TV2.java:76</a></div></div>
<div class="ttc" id="aa01406_html_aea566df340960329b28c5da7e2f0594d"><div class="ttname"><a href="../../dc/d25/a01406.html#aea566df340960329b28c5da7e2f0594d">com.cliffc.aa.tvar.TV2._type</a></div><div class="ttdeci">Type _type</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00049">TV2.java:49</a></div></div>
<div class="ttc" id="aa01406_html_a7aab592945b0ce1a64d33bdce69d8122"><div class="ttname"><a href="../../dc/d25/a01406.html#a7aab592945b0ce1a64d33bdce69d8122">com.cliffc.aa.tvar.TV2.DEAD</a></div><div class="ttdeci">static TV2 DEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00180">TV2.java:180</a></div></div>
<div class="ttc" id="aa01406_html_a6f8b11eef3b8646135f21166610eba9f"><div class="ttname"><a href="../../dc/d25/a01406.html#a6f8b11eef3b8646135f21166610eba9f">com.cliffc.aa.tvar.TV2.reset_to_init0</a></div><div class="ttdeci">static void reset_to_init0()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00183">TV2.java:183</a></div></div>
<div class="ttc" id="aa01406_html_a820442ae543367b8dfed96b533307cdb"><div class="ttname"><a href="../../dc/d25/a01406.html#a820442ae543367b8dfed96b533307cdb">com.cliffc.aa.tvar.TV2._occurs_in_type</a></div><div class="ttdeci">boolean _occurs_in_type(TV2 x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00619">TV2.java:619</a></div></div>
<div class="ttc" id="aa01406_html_a7b42a05c8f1e701f44a54c991ee0c6d6"><div class="ttname"><a href="../../dc/d25/a01406.html#a7b42a05c8f1e701f44a54c991ee0c6d6">com.cliffc.aa.tvar.TV2._unified</a></div><div class="ttdeci">TV2 _unified</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00046">TV2.java:46</a></div></div>
<div class="ttc" id="aa01442_html_a45b1b62ef9143b7742bb770de1034fb9"><div class="ttname"><a href="../../d0/de2/a01442.html#a45b1b62ef9143b7742bb770de1034fb9">com.cliffc.aa.type.Type.ALL</a></div><div class="ttdeci">static final Type ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00324">Type.java:324</a></div></div>
<div class="ttc" id="aa01406_html_af10d3412a6d2e5518aab3bd298d177ce"><div class="ttname"><a href="../../dc/d25/a01406.html#af10d3412a6d2e5518aab3bd298d177ce">com.cliffc.aa.tvar.TV2.make</a></div><div class="ttdeci">static TV2 make(@NotNull String name, Node n, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00154">TV2.java:154</a></div></div>
<div class="ttc" id="aa01406_html_a173f4ba3df1f29fc0dcb41589edc93dc"><div class="ttname"><a href="../../dc/d25/a01406.html#a173f4ba3df1f29fc0dcb41589edc93dc">com.cliffc.aa.tvar.TV2.unify_alias_fld</a></div><div class="ttdeci">boolean unify_alias_fld(Node ldst, BitsAlias aliases, String fld, TV2 tv, boolean test, String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00488">TV2.java:488</a></div></div>
<div class="ttc" id="aa01646_html_a88ad20daf92e92fe0e3925b23c4fecf0"><div class="ttname"><a href="../../df/dee/a01646.html#a88ad20daf92e92fe0e3925b23c4fecf0">com.cliffc.aa.util.VBitSet.tset</a></div><div class="ttdeci">boolean tset(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d25/a00290_source.html#l00007">VBitSet.java:7</a></div></div>
<div class="ttc" id="aa01406_html_a83e37d97539e7bf8965dfca391cc3f2e"><div class="ttname"><a href="../../dc/d25/a01406.html#a83e37d97539e7bf8965dfca391cc3f2e">com.cliffc.aa.tvar.TV2._rename</a></div><div class="ttdeci">void _rename(TV2 tv, HashMap&lt; Node, Node &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00468">TV2.java:468</a></div></div>
<div class="ttc" id="aa00378_html_ace73698a8b4c67bf851fc0068b036c87"><div class="ttname"><a href="../../d7/d08/a00378.html#ace73698a8b4c67bf851fc0068b036c87">com.cliffc.aa.Env.GVN</a></div><div class="ttdeci">static final GVNGCM GVN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dee/a00008_source.html#l00013">Env.java:13</a></div></div>
<div class="ttc" id="aa01406_html_a62d673448fbff0f21927cc782b436582"><div class="ttname"><a href="../../dc/d25/a01406.html#a62d673448fbff0f21927cc782b436582">com.cliffc.aa.tvar.TV2.TV2</a></div><div class="ttdeci">TV2(@NotNull String name, NonBlockingHashMap&lt; Comparable, TV2 &gt; args, Type type, UQNodes ns, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00063">TV2.java:63</a></div></div>
<div class="ttc" id="aa01502_html"><div class="ttname"><a href="../../de/dc6/a01502.html">com.cliffc.aa.type.TypeObj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de1/a00233_source.html#l00015">TypeObj.java:15</a></div></div>
<div class="ttc" id="aa01406_html_a87dfb7406a83eb8d86b5784a65efb673"><div class="ttname"><a href="../../dc/d25/a01406.html#a87dfb7406a83eb8d86b5784a65efb673">com.cliffc.aa.tvar.TV2.is_dead</a></div><div class="ttdeci">boolean is_dead()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00081">TV2.java:81</a></div></div>
<div class="ttc" id="aa01406_html_a9588487de597baf48db564799d6bb3c7"><div class="ttname"><a href="../../dc/d25/a01406.html#a9588487de597baf48db564799d6bb3c7">com.cliffc.aa.tvar.TV2.CDUPS</a></div><div class="ttdeci">static final HashMap&lt; TV2, TV2 &gt; CDUPS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00639">TV2.java:639</a></div></div>
<div class="ttc" id="aa01406_html_ac1371821daaa0266f0edea5481c9867f"><div class="ttname"><a href="../../dc/d25/a01406.html#ac1371821daaa0266f0edea5481c9867f">com.cliffc.aa.tvar.TV2.occurs_in</a></div><div class="ttdeci">boolean occurs_in(TV2[] vs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00599">TV2.java:599</a></div></div>
<div class="ttc" id="aa01606_html_ac30117742c9a7c0573e631930ecc22d1"><div class="ttname"><a href="../../d3/d2d/a01606.html#ac30117742c9a7c0573e631930ecc22d1">com.cliffc.aa.util.NonBlockingHashMapLong.get</a></div><div class="ttdeci">final TypeV get(long key)</div><div class="ttdoc">Returns the value to which the specified key is mapped, or.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l00368">NonBlockingHashMapLong.java:368</a></div></div>
<div class="ttc" id="aa01406_html_a09757419fe496417dc275c05ee6f5077"><div class="ttname"><a href="../../dc/d25/a01406.html#a09757419fe496417dc275c05ee6f5077">com.cliffc.aa.tvar.TV2.toString</a></div><div class="ttdeci">final String toString()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00701">TV2.java:701</a></div></div>
<div class="ttc" id="aa01406_html_a53738f7608c4b779e2f08a15442044a9"><div class="ttname"><a href="../../dc/d25/a01406.html#a53738f7608c4b779e2f08a15442044a9">com.cliffc.aa.tvar.TV2.UID</a></div><div class="ttdeci">static int UID</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00025">TV2.java:25</a></div></div>
<div class="ttc" id="aa01406_html_aa0e879691e40a900c87a92e0e316bc72"><div class="ttname"><a href="../../dc/d25/a01406.html#aa0e879691e40a900c87a92e0e316bc72">com.cliffc.aa.tvar.TV2.make</a></div><div class="ttdeci">static TV2 make(@NotNull String name, Node n, @NotNull String alloc_site, NonBlockingHashMap&lt; Comparable, TV2 &gt; args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00156">TV2.java:156</a></div></div>
<div class="ttc" id="aa01406_html_a22579fa236159c7d33cb513bc10a012e"><div class="ttname"><a href="../../dc/d25/a01406.html#a22579fa236159c7d33cb513bc10a012e">com.cliffc.aa.tvar.TV2.free</a></div><div class="ttdeci">void free()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00189">TV2.java:189</a></div></div>
<div class="ttc" id="aa01406_html_aca9186fb3bc4c2ba9584ea1e800b7192"><div class="ttname"><a href="../../dc/d25/a01406.html#aca9186fb3bc4c2ba9584ea1e800b7192">com.cliffc.aa.tvar.TV2.eq</a></div><div class="ttdeci">final boolean eq(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00200">TV2.java:200</a></div></div>
<div class="ttc" id="aa01406_html_a85fb34ef9ea353e0a47c567a8202cecd"><div class="ttname"><a href="../../dc/d25/a01406.html#a85fb34ef9ea353e0a47c567a8202cecd">com.cliffc.aa.tvar.TV2.unify_alias</a></div><div class="ttdeci">boolean unify_alias(BitsAlias aliases, TV2 mem, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00515">TV2.java:515</a></div></div>
<div class="ttc" id="aa01638_html"><div class="ttname"><a href="../../dd/d55/a01638.html">com.cliffc.aa.util.Util</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc3/a00284_source.html#l00005">Util.java:5</a></div></div>
<div class="ttc" id="aa01502_html_a68552cf221d599855cfc2906fd5b2e1a"><div class="ttname"><a href="../../de/dc6/a01502.html#a68552cf221d599855cfc2906fd5b2e1a">com.cliffc.aa.type.TypeObj.UNUSED</a></div><div class="ttdeci">static final TypeObj UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de1/a00233_source.html#l00046">TypeObj.java:46</a></div></div>
<div class="ttc" id="aa01530_html_a47d2201401538218682099fe1a41cbcd"><div class="ttname"><a href="../../d7/d90/a01530.html#a47d2201401538218682099fe1a41cbcd">com.cliffc.aa.type.TypeTuple.len</a></div><div class="ttdeci">int len()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd7/a00248_source.html#l00183">TypeTuple.java:183</a></div></div>
<div class="ttc" id="aa01406_html_a95acdbc0296c7c4cdd77c333d71c3ec9"><div class="ttname"><a href="../../dc/d25/a01406.html#a95acdbc0296c7c4cdd77c333d71c3ec9">com.cliffc.aa.tvar.TV2.make_mem</a></div><div class="ttdeci">static TV2 make_mem(Node n, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00178">TV2.java:178</a></div></div>
<div class="ttc" id="aa01406_html_a58af3c233303f8cedbcf08aec1632f6d"><div class="ttname"><a href="../../dc/d25/a01406.html#a58af3c233303f8cedbcf08aec1632f6d">com.cliffc.aa.tvar.TV2.cycle_equals</a></div><div class="ttdeci">boolean cycle_equals(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00640">TV2.java:640</a></div></div>
<div class="ttc" id="aa01406_html_a421ae75e116a6fb426743a25228966d5"><div class="ttname"><a href="../../dc/d25/a01406.html#a421ae75e116a6fb426743a25228966d5">com.cliffc.aa.tvar.TV2.merge_deps</a></div><div class="ttdeci">void merge_deps(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00693">TV2.java:693</a></div></div>
<div class="ttc" id="aa01406_html_a5dde549e0fc6c1a2f46976e5d79873ee"><div class="ttname"><a href="../../dc/d25/a01406.html#a5dde549e0fc6c1a2f46976e5d79873ee">com.cliffc.aa.tvar.TV2.is_prim</a></div><div class="ttdeci">boolean is_prim()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00714">TV2.java:714</a></div></div>
<div class="ttc" id="aa01502_html_a2f0f37629678b504449f6fdf70f39339"><div class="ttname"><a href="../../de/dc6/a01502.html#a2f0f37629678b504449f6fdf70f39339">com.cliffc.aa.type.TypeObj.ISUSED</a></div><div class="ttdeci">static final TypeObj ISUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de1/a00233_source.html#l00045">TypeObj.java:45</a></div></div>
<div class="ttc" id="aa01406_html_a885e314e8b9639068936cd70e8530376"><div class="ttname"><a href="../../dc/d25/a01406.html#a885e314e8b9639068936cd70e8530376">com.cliffc.aa.tvar.TV2.is_nil</a></div><div class="ttdeci">boolean is_nil()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00080">TV2.java:80</a></div></div>
<div class="ttc" id="aa01406_html_a40fbdc3d7df0c7432ff5ac0561b5a13e"><div class="ttname"><a href="../../dc/d25/a01406.html#a40fbdc3d7df0c7432ff5ac0561b5a13e">com.cliffc.aa.tvar.TV2.make_leaf</a></div><div class="ttdeci">static TV2 make_leaf(Node n, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00126">TV2.java:126</a></div></div>
<div class="ttc" id="aa01578_html_a173a0399a8be0ce533fa8293f931510a"><div class="ttname"><a href="../../d1/d88/a01578.html#a173a0399a8be0ce533fa8293f931510a">com.cliffc.aa.util.NonBlockingHashMap.put</a></div><div class="ttdeci">TypeV put(TypeK key, TypeV val)</div><div class="ttdoc">Maps the specified key to the specified value in the table.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5e/a00275_source.html#l00310">NonBlockingHashMap.java:310</a></div></div>
<div class="ttc" id="aa01518_html_ac318226162b9678acaf62563bdc04ed9"><div class="ttname"><a href="../../d0/d1a/a01518.html#ac318226162b9678acaf62563bdc04ed9">com.cliffc.aa.type.TypeStr.con</a></div><div class="ttdeci">static TypeStr con(String con)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc8/a00242_source.html#l00042">TypeStr.java:42</a></div></div>
<div class="ttc" id="aa01406_html_ab60dd4e4b9caf765c077fc24c96521d8"><div class="ttname"><a href="../../dc/d25/a01406.html#ab60dd4e4b9caf765c077fc24c96521d8">com.cliffc.aa.tvar.TV2._fresh_unify</a></div><div class="ttdeci">boolean _fresh_unify(TV2 that, TV2[] vs, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00384">TV2.java:384</a></div></div>
<div class="ttc" id="aa01406_html_a278ec8d9b9c40d681176974542fee2eb"><div class="ttname"><a href="../../dc/d25/a01406.html#a278ec8d9b9c40d681176974542fee2eb">com.cliffc.aa.tvar.TV2.is_base</a></div><div class="ttdeci">boolean is_base()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00079">TV2.java:79</a></div></div>
<div class="ttc" id="aa01406_html_aab01004b5728ce0109daff3f4fb48b4b"><div class="ttname"><a href="../../dc/d25/a01406.html#aab01004b5728ce0109daff3f4fb48b4b">com.cliffc.aa.tvar.TV2.find_dups</a></div><div class="ttdeci">final int find_dups(VBitSet bs, NonBlockingHashMapLong&lt; String &gt; dups, int scnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00720">TV2.java:720</a></div></div>
<div class="ttc" id="aa01414_html_a56817ac6db518b86fd24f5db8f5f4206"><div class="ttname"><a href="../../d8/df1/a01414.html#a56817ac6db518b86fd24f5db8f5f4206">com.cliffc.aa.tvar.UQNodes.make</a></div><div class="ttdeci">static UQNodes make(Node tn)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df3/a00185_source.html#l00028">UQNodes.java:28</a></div></div>
<div class="ttc" id="aa01414_html_a292d2c37002719c94db13e29a951e5b2"><div class="ttname"><a href="../../d8/df1/a01414.html#a292d2c37002719c94db13e29a951e5b2">com.cliffc.aa.tvar.UQNodes.rename</a></div><div class="ttdeci">UQNodes rename(HashMap&lt; Node, Node &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df3/a00185_source.html#l00070">UQNodes.java:70</a></div></div>
<div class="ttc" id="aa01518_html"><div class="ttname"><a href="../../d0/d1a/a01518.html">com.cliffc.aa.type.TypeStr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc8/a00242_source.html#l00014">TypeStr.java:14</a></div></div>
<div class="ttc" id="aa01046_html"><div class="ttname"><a href="../../da/d17/a01046.html">com.cliffc.aa.node.FreshNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dec/a00080_source.html#l00011">FreshNode.java:11</a></div></div>
<div class="ttc" id="aa01406_html_aa5af74082cd338b0be0f43a0e3b05df8"><div class="ttname"><a href="../../dc/d25/a01406.html#aa5af74082cd338b0be0f43a0e3b05df8">com.cliffc.aa.tvar.TV2.find_tvar</a></div><div class="ttdeci">Type find_tvar(Type t, TV2 tv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00535">TV2.java:535</a></div></div>
<div class="ttc" id="aa01406_html_a7c257871a546d20f2fe8c0868c33bf54"><div class="ttname"><a href="../../dc/d25/a01406.html#a7c257871a546d20f2fe8c0868c33bf54">com.cliffc.aa.tvar.TV2._occurs_in</a></div><div class="ttdeci">boolean _occurs_in(TV2[] vs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00611">TV2.java:611</a></div></div>
<div class="ttc" id="aa01646_html"><div class="ttname"><a href="../../df/dee/a01646.html">com.cliffc.aa.util.VBitSet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d25/a00290_source.html#l00005">VBitSet.java:5</a></div></div>
<div class="ttc" id="aa02518_html"><div class="ttname"><a href="../../d6/de1/a02518.html">Comparable</a></div></div>
<div class="ttc" id="aa01406_html_ad8363e8ed623aaeb12f95026b968b1b1"><div class="ttname"><a href="../../dc/d25/a01406.html#ad8363e8ed623aaeb12f95026b968b1b1">com.cliffc.aa.tvar.TV2.unify_base</a></div><div class="ttdeci">boolean unify_base(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00353">TV2.java:353</a></div></div>
<div class="ttc" id="aa01734_html"><div class="ttname"><a href="../../d0/d1f/a01734.html">NotNull</a></div></div>
<div class="ttc" id="aa01406_html_ae4f152b835882d5c7ab77bfdf73c311f"><div class="ttname"><a href="../../dc/d25/a01406.html#ae4f152b835882d5c7ab77bfdf73c311f">com.cliffc.aa.tvar.TV2.make</a></div><div class="ttdeci">static TV2 make(@NotNull String name, Node n, @NotNull String alloc_site, Node... ntvs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00163">TV2.java:163</a></div></div>
<div class="ttc" id="aa01634_html"><div class="ttname"><a href="../../d4/d99/a01634.html">com.cliffc.aa.util.SB</a></div><div class="ttdoc">Tight/tiny StringBuilder wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d04/a00281_source.html#l00008">SB.java:8</a></div></div>
<div class="ttc" id="aa01414_html_a4ef173761f50fd5b2886d3636b4d6c6e"><div class="ttname"><a href="../../d8/df1/a01414.html#a4ef173761f50fd5b2886d3636b4d6c6e">com.cliffc.aa.tvar.UQNodes.add</a></div><div class="ttdeci">UQNodes add(Node tn)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df3/a00185_source.html#l00036">UQNodes.java:36</a></div></div>
<div class="ttc" id="aa01406_html_a4c6344d5b696661ebc8894c4d6d5d83d"><div class="ttname"><a href="../../dc/d25/a01406.html#a4c6344d5b696661ebc8894c4d6d5d83d">com.cliffc.aa.tvar.TV2.isa</a></div><div class="ttdeci">boolean isa(String s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00077">TV2.java:77</a></div></div>
<div class="ttc" id="aa01406_html_a07a6aa0c37c0691f110695fad38bcee6"><div class="ttname"><a href="../../dc/d25/a01406.html#a07a6aa0c37c0691f110695fad38bcee6">com.cliffc.aa.tvar.TV2.str</a></div><div class="ttdeci">final String str(int d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00707">TV2.java:707</a></div></div>
<div class="ttc" id="aa00370_html"><div class="ttname"><a href="../../d3/d30/a00370.html">com.cliffc.aa.AA</a></div><div class="ttdoc">an implementation of language AA</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d46/a00002_source.html#l00009">AA.java:9</a></div></div>
<div class="ttc" id="aa01406_html_a383e14e38f068c319aff8e734c111757"><div class="ttname"><a href="../../dc/d25/a01406.html#a383e14e38f068c319aff8e734c111757">com.cliffc.aa.tvar.TV2.eq</a></div><div class="ttdeci">boolean eq(Node[] args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00231">TV2.java:231</a></div></div>
<div class="ttc" id="aa01406_html_a31bddb4a040fd7ea42947588d662a8dd"><div class="ttname"><a href="../../dc/d25/a01406.html#a31bddb4a040fd7ea42947588d662a8dd">com.cliffc.aa.tvar.TV2.NIL</a></div><div class="ttdeci">static TV2 NIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00181">TV2.java:181</a></div></div>
<div class="ttc" id="aa01406_html_aaeebb1bfefc71053cce5aa5514da824a"><div class="ttname"><a href="../../dc/d25/a01406.html#aaeebb1bfefc71053cce5aa5514da824a">com.cliffc.aa.tvar.TV2.get</a></div><div class="ttdeci">TV2 get(Comparable key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00089">TV2.java:89</a></div></div>
<div class="ttc" id="aa00347_html"><div class="ttname"><a href="../../d1/dc6/a00347.html">com.cliffc.aa</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d46/a00002_source.html#l00001">AA.java:1</a></div></div>
<div class="ttc" id="aa01406_html_a3c332f2ea005200c9b35129df3e591a2"><div class="ttname"><a href="../../dc/d25/a01406.html#a3c332f2ea005200c9b35129df3e591a2">com.cliffc.aa.tvar.TV2._push_update</a></div><div class="ttdeci">void _push_update(CallEpiNode dep)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00680">TV2.java:680</a></div></div>
<div class="ttc" id="aa01606_html_a81efe0f95acedf68bddb8ebd7b45b26f"><div class="ttname"><a href="../../d3/d2d/a01606.html#a81efe0f95acedf68bddb8ebd7b45b26f">com.cliffc.aa.util.NonBlockingHashMapLong.containsKey</a></div><div class="ttdeci">boolean containsKey(long key)</div><div class="ttdoc">Tests if the key in the table.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l00258">NonBlockingHashMapLong.java:258</a></div></div>
<div class="ttc" id="aa01414_html"><div class="ttname"><a href="../../d8/df1/a01414.html">com.cliffc.aa.tvar.UQNodes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/df3/a00185_source.html#l00008">UQNodes.java:8</a></div></div>
<div class="ttc" id="aa01406_html_a86bdc19a3f80db294f5e9f0d690c2f3c"><div class="ttname"><a href="../../dc/d25/a01406.html#a86bdc19a3f80db294f5e9f0d690c2f3c">com.cliffc.aa.tvar.TV2.make_err</a></div><div class="ttdeci">static TV2 make_err(Node n, String msg, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00147">TV2.java:147</a></div></div>
<div class="ttc" id="aa01542_html_a65898ac2a48fc5bdf4b3de6d962ff008"><div class="ttname"><a href="../../d6/d02/a01542.html#a65898ac2a48fc5bdf4b3de6d962ff008">com.cliffc.aa.util.Ary.sort_update</a></div><div class="ttdeci">void sort_update(Comparator&lt;? super E &gt; c)</div><div class="ttdoc">Sorts in-place.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/a00257_source.html#l00187">Ary.java:187</a></div></div>
<div class="ttc" id="aa01530_html_ae4b5261d8e37ce7b725ff9832d524ae0"><div class="ttname"><a href="../../d7/d90/a01530.html#ae4b5261d8e37ce7b725ff9832d524ae0">com.cliffc.aa.type.TypeTuple.at</a></div><div class="ttdeci">Type at(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd7/a00248_source.html#l00182">TypeTuple.java:182</a></div></div>
<div class="ttc" id="aa00390_html_ad52b88a21b47c661e6f6a3bcfdbb3576"><div class="ttname"><a href="../../d9/d0a/a00390.html#ad52b88a21b47c661e6f6a3bcfdbb3576">com.cliffc.aa.GVNGCM.add_reduce</a></div><div class="ttdeci">public&lt; N extends Node &gt; N add_reduce(N n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de7/a00014_source.html#l00049">GVNGCM.java:49</a></div></div>
<div class="ttc" id="aa01406_html_a6e21d9846b4fa090d2a0c87b6d078981"><div class="ttname"><a href="../../dc/d25/a01406.html#a6e21d9846b4fa090d2a0c87b6d078981">com.cliffc.aa.tvar.TV2.reset_at</a></div><div class="ttdeci">void reset_at(Object o)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00118">TV2.java:118</a></div></div>
<div class="ttc" id="aa01406_html_ad71e1e39bc70e439ac1354dfc93c479a"><div class="ttname"><a href="../../dc/d25/a01406.html#ad71e1e39bc70e439ac1354dfc93c479a">com.cliffc.aa.tvar.TV2.repl_rename</a></div><div class="ttdeci">TV2 repl_rename(TV2[]vs, HashMap&lt; Node, Node &gt; map)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00461">TV2.java:461</a></div></div>
<div class="ttc" id="aa01006_html"><div class="ttname"><a href="../../dc/d81/a01006.html">com.cliffc.aa.node.CallEpiNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de0/a00050_source.html#l00024">CallEpiNode.java:24</a></div></div>
<div class="ttc" id="aa01406_html"><div class="ttname"><a href="../../dc/d25/a01406.html">com.cliffc.aa.tvar.TV2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00023">TV2.java:23</a></div></div>
<div class="ttc" id="aa01606_html"><div class="ttname"><a href="../../d3/d2d/a01606.html">com.cliffc.aa.util.NonBlockingHashMapLong</a></div><div class="ttdoc">A lock-free alternate implementation of java.util.concurrent.ConcurrentHashMap with primitive long ke...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l00089">NonBlockingHashMapLong.java:91</a></div></div>
<div class="ttc" id="aa01406_html_a989db00cbed5bceb7f403d4058e5b58d"><div class="ttname"><a href="../../dc/d25/a01406.html#a989db00cbed5bceb7f403d4058e5b58d">com.cliffc.aa.tvar.TV2.make</a></div><div class="ttdeci">static TV2 make(@NotNull String name, UQNodes ns, @NotNull String alloc_site)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00171">TV2.java:171</a></div></div>
<div class="ttc" id="aa01406_html_afa5f006a73eb9e0fd45b9ba6a6fed014"><div class="ttname"><a href="../../dc/d25/a01406.html#afa5f006a73eb9e0fd45b9ba6a6fed014">com.cliffc.aa.tvar.TV2.fresh_base</a></div><div class="ttdeci">boolean fresh_base(TV2 that, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00357">TV2.java:357</a></div></div>
<div class="ttc" id="aa01406_html_ab433232ecf9cb0ca8a005ea97c2d00b8"><div class="ttname"><a href="../../dc/d25/a01406.html#ab433232ecf9cb0ca8a005ea97c2d00b8">com.cliffc.aa.tvar.TV2.union</a></div><div class="ttdeci">boolean union(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00255">TV2.java:255</a></div></div>
<div class="ttc" id="aa01406_html_a09746364239208c74a1e60856884cda8"><div class="ttname"><a href="../../dc/d25/a01406.html#a09746364239208c74a1e60856884cda8">com.cliffc.aa.tvar.TV2.vput</a></div><div class="ttdeci">TV2 vput(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00435">TV2.java:435</a></div></div>
<div class="ttc" id="aa01606_html_a5a55b6990f90cebab60051b6a03c5e3b"><div class="ttname"><a href="../../d3/d2d/a01606.html#a5a55b6990f90cebab60051b6a03c5e3b">com.cliffc.aa.util.NonBlockingHashMapLong.put</a></div><div class="ttdeci">TypeV put(long key, TypeV val)</div><div class="ttdoc">Maps the specified key to the specified value in the table.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l00278">NonBlockingHashMapLong.java:278</a></div></div>
<div class="ttc" id="aa00390_html_a195b2b7d0b8f0f1770422573c2cc22ff"><div class="ttname"><a href="../../d9/d0a/a00390.html#a195b2b7d0b8f0f1770422573c2cc22ff">com.cliffc.aa.GVNGCM.add_flow</a></div><div class="ttdeci">public&lt; N extends Node &gt; N add_flow(N n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de7/a00014_source.html#l00050">GVNGCM.java:50</a></div></div>
<div class="ttc" id="aa01406_html_a48dec7908873404fa6e2e1d5b19b336f"><div class="ttname"><a href="../../dc/d25/a01406.html#a48dec7908873404fa6e2e1d5b19b336f">com.cliffc.aa.tvar.TV2.fresh_unify</a></div><div class="ttdeci">boolean fresh_unify(TV2 that, TV2[] vs, boolean test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00374">TV2.java:374</a></div></div>
<div class="ttc" id="aa01158_html_a7da00d39e3923250352c680956a33858"><div class="ttname"><a href="../../df/db5/a01158.html#a7da00d39e3923250352c680956a33858">com.cliffc.aa.node.Node._uid</a></div><div class="ttdeci">int _uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d88/a00128_source.html#l00084">Node.java:84</a></div></div>
<div class="ttc" id="aa01406_html_a9ba175cfa593fd3d5b1857442e6565a3"><div class="ttname"><a href="../../dc/d25/a01406.html#a9ba175cfa593fd3d5b1857442e6565a3">com.cliffc.aa.tvar.TV2.merge_ns</a></div><div class="ttdeci">void merge_ns(TV2 that)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00696">TV2.java:696</a></div></div>
<div class="ttc" id="aa00348_html"><div class="ttname"><a href="../../df/d03/a00348.html">com</a></div></div>
<div class="ttc" id="aa01406_html_a07ca3621fc62775d085fbb62dce31e25"><div class="ttname"><a href="../../dc/d25/a01406.html#a07ca3621fc62775d085fbb62dce31e25">com.cliffc.aa.tvar.TV2.is_free</a></div><div class="ttdeci">boolean is_free()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00082">TV2.java:82</a></div></div>
<div class="ttc" id="aa01406_html_a12bcc39ffe0e0c703cdbd3336f2de237"><div class="ttname"><a href="../../dc/d25/a01406.html#a12bcc39ffe0e0c703cdbd3336f2de237">com.cliffc.aa.tvar.TV2._find_tvar</a></div><div class="ttdeci">Type _find_tvar(Type t, TV2 tv, Type rez)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00541">TV2.java:541</a></div></div>
<div class="ttc" id="aa01494_html_ae46f6ec465a8f92933cac6594c35d615"><div class="ttname"><a href="../../d6/d51/a01494.html#ae46f6ec465a8f92933cac6594c35d615">com.cliffc.aa.type.TypeMem.at</a></div><div class="ttdeci">TypeObj at(int alias)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/a00227_source.html#l00135">TypeMem.java:135</a></div></div>
<div class="ttc" id="aa00378_html"><div class="ttname"><a href="../../d7/d08/a00378.html">com.cliffc.aa.Env</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dee/a00008_source.html#l00012">Env.java:12</a></div></div>
<div class="ttc" id="aa01606_html_a7dabc238f566bd1039cc62b63af734ed"><div class="ttname"><a href="../../d3/d2d/a01606.html#a7dabc238f566bd1039cc62b63af734ed">com.cliffc.aa.util.NonBlockingHashMapLong.values</a></div><div class="ttdeci">Collection&lt; TypeV &gt; values()</div><div class="ttdoc">Returns a Collection view of the values contained in this map.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l01118">NonBlockingHashMapLong.java:1118</a></div></div>
<div class="ttc" id="aa01442_html_ade2059a7facf88e4f1e3c338d2b8fc5d"><div class="ttname"><a href="../../d0/de2/a01442.html#ade2059a7facf88e4f1e3c338d2b8fc5d">com.cliffc.aa.type.Type.getstr</a></div><div class="ttdeci">String getstr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00806">Type.java:806</a></div></div>
<div class="ttc" id="aa01406_html_ae7020c1fe937698dcc459b53362a916c"><div class="ttname"><a href="../../dc/d25/a01406.html#ae7020c1fe937698dcc459b53362a916c">com.cliffc.aa.tvar.TV2.is_leaf</a></div><div class="ttdeci">boolean is_leaf()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00078">TV2.java:78</a></div></div>
<div class="ttc" id="aa01406_html_a8b68293aec208987e56016b62c38efdc"><div class="ttname"><a href="../../dc/d25/a01406.html#a8b68293aec208987e56016b62c38efdc">com.cliffc.aa.tvar.TV2._uid</a></div><div class="ttdeci">final int _uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00026">TV2.java:26</a></div></div>
<div class="ttc" id="aa00353_html"><div class="ttname"><a href="../../db/ddc/a00353.html">com.cliffc.aa.type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d15/a00188_source.html#l00001">Bits.java:1</a></div></div>
<div class="ttc" id="aa01406_html_a3c3e29b611b40fe33a0aaf85b67309b9"><div class="ttname"><a href="../../dc/d25/a01406.html#a3c3e29b611b40fe33a0aaf85b67309b9">com.cliffc.aa.tvar.TV2.find</a></div><div class="ttdeci">TV2 find()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00240">TV2.java:240</a></div></div>
<div class="ttc" id="aa01406_html_a82e28755cd27975dcf318490bdb444b1"><div class="ttname"><a href="../../dc/d25/a01406.html#a82e28755cd27975dcf318490bdb444b1">com.cliffc.aa.tvar.TV2.repl</a></div><div class="ttdeci">TV2 repl(TV2[] vs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00438">TV2.java:438</a></div></div>
<div class="ttc" id="aa01498_html"><div class="ttname"><a href="../../d6/dc9/a01498.html">com.cliffc.aa.type.TypeMemPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da8/a00230_source.html#l00014">TypeMemPtr.java:14</a></div></div>
<div class="ttc" id="aa01606_html_a27b3239dcc81fdb7acf7c220d8fb20c1"><div class="ttname"><a href="../../d3/d2d/a01606.html#a27b3239dcc81fdb7acf7c220d8fb20c1">com.cliffc.aa.util.NonBlockingHashMapLong.remove</a></div><div class="ttdeci">TypeV remove(long key)</div><div class="ttdoc">Removes the key (and its corresponding value) from this map.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5d/a00278_source.html#l00292">NonBlockingHashMapLong.java:292</a></div></div>
<div class="ttc" id="aa01406_html_a34171f0e8358f2df620aa3ba8cf86bca"><div class="ttname"><a href="../../dc/d25/a01406.html#a34171f0e8358f2df620aa3ba8cf86bca">com.cliffc.aa.tvar.TV2.VARS</a></div><div class="ttdeci">static final HashMap&lt; TV2, TV2 &gt; VARS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d25/a00182_source.html#l00366">TV2.java:366</a></div></div>
<div class="ttc" id="aa01442_html_a963687439af26e21baf8a6901f52674a"><div class="ttname"><a href="../../d0/de2/a01442.html#a963687439af26e21baf8a6901f52674a">com.cliffc.aa.type.Type.is_forward_ref</a></div><div class="ttdeci">boolean is_forward_ref()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/db1/a00200_source.html#l00799">Type.java:799</a></div></div>
<div class="ttc" id="aa00351_html"><div class="ttname"><a href="../../d0/d48/a00351.html">com.cliffc.aa.node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d2d/a00047_source.html#l00001">AssertNode.java:1</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_5eb159725f84c66aafd839904a4acdd0.html">main</a></li><li class="navelem"><a class="el" href="../../dir_fd3f6763802dee1ad875f6c80eac0bda.html">java</a></li><li class="navelem"><a class="el" href="../../dir_d8517d8b842053dc3dd7dde525dd9163.html">com</a></li><li class="navelem"><a class="el" href="../../dir_56acb4c897cae467839e432eb6d90ced.html">cliffc</a></li><li class="navelem"><a class="el" href="../../dir_4bf2c2aaa4c8c297b7b3132f0a2c4126.html">aa</a></li><li class="navelem"><a class="el" href="../../dir_5a103253db744339a848d5db26fc7d0e.html">tvar</a></li><li class="navelem"><a class="el" href="../../d7/d25/a00182.html">TV2.java</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
